"use strict";var Ghost=function(t){this.overlayElement=this.create(),this.currentElement=t};$.extend(Ghost.prototype,{create:function(){var t=$('<div class="overlay ghost"></div>');return $('<div class="container-margin top"></div>').appendTo(t),$('<div class="container-margin bottom"></div>').appendTo(t),$('<div class="container-margin left"></div>').appendTo(t),$('<div class="container-margin right"></div>').appendTo(t),$('<div class="container-padding top"></div>').appendTo(t),$('<div class="container-padding bottom"></div>').appendTo(t),$('<div class="container-padding left"></div>').appendTo(t),$('<div class="container-padding right"></div>').appendTo(t),t.appendTo("body"),t[0]},destroy:function(){this.overlayElement.parentNode.removeChild(this.overlayElement)},relayout:function(t){t&&(this.currentElement=t);var e=this.overlayElement,i=$(this.currentElement),o=i.offset(),n=getComputedStyle(this.currentElement),a=parseInt(n.width),s=parseInt(n.height),d=parseInt(n.paddingLeft),r=parseInt(n.paddingTop),h=parseInt(n.paddingRight),l=parseInt(n.paddingBottom),p=parseInt(n.marginLeft),g=parseInt(n.marginTop),u=parseInt(n.marginRight),c=parseInt(n.marginBottom),y=a+d+h,v=s+r+l;e.style.display="block",e.style.width=a+"px",e.style.height=s+"px",e.style.transform="translate("+(o.left+d)+"px, "+(o.top+r)+"px)",$(".container-padding.left",e).css({width:d,height:v,top:-r,left:-d}),$(".container-padding.right",e).css({width:h,height:v,top:-r,right:-h}),$(".container-padding.top",e).css({width:a,height:r,top:-r}),$(".container-padding.bottom",e).css({width:a,height:l,bottom:-l}),$(".container-margin.left",e).css({width:p,height:v+g+c,top:-(r+g),left:-(d+p)}),$(".container-margin.right",e).css({width:u,height:v+g+c,top:-(r+g),right:-(h+u)}),$(".container-margin.top",e).css({width:y,height:g,top:-(r+g),left:-d}),$(".container-margin.bottom",e).css({width:y,height:c,bottom:-(l+c),left:-d})}}),function(){var t="ontouchstart"in document,e=function(t,e){this.options=e,this.eventDown=t.touches?t.touches[0]:t,this.start()};$.extend(e.prototype,{start:function(){event.preventDefault(),LayoutMode.interacting=!0;var e=this;this.__move=function(t){e.move(t)},this.__stop=function(t){e.stop(t)},document.addEventListener(t?"touchmove":"mousemove",this.__move,!1),document.addEventListener(t?"touchend":"mouseup",this.__stop,!1)},move:function(t){this.eventMove=t.touches?t.touches[0]:t,t.preventDefault();var e=0;e=this.options.vertical?this.eventDown.pageY-this.eventMove.pageY:this.eventDown.pageX-this.eventMove.pageX,this.options.move(e)},stop:function(e){document.removeEventListener(t?"touchmove":"mousemove",this.__move),document.removeEventListener(t?"touchend":"mouseup",this.__stop),e.preventDefault(),LayoutMode.lastInteractionTime=Date.now(),LayoutMode.interacting=!1,this.options.stop&&this.options.stop()}}),window.Dragger=e}();var SPECIFICITY=function(){var t,e;return t=function(t){var i,o,n,a,s=[];for(i=t.split(","),n=0,a=i.length;a>n;n+=1)o=i[n],o.length>0&&s.push(e(o));return s},e=function(t){var e,i=t,o={a:0,b:0,c:0},n=[],a=/(\[[^\]]+\])/g,s=/(#[^\s\+>~\.\[:]+)/g,d=/(\.[^\s\+>~\.\[:]+)/g,r=/(::[^\s\+>~\.\[:]+|:first-line|:first-letter|:before|:after)/gi,h=/(:[\w-]+\([^\)]*\))/gi,l=/(:[^\s\+>~\.\[:]+)/g,p=/([^\s\+>~\.\[:]+)/g;return e=function(t,e){var a,s,d,r,h,l;if(t.test(i))for(a=i.match(t),s=0,d=a.length;d>s;s+=1)o[e]+=1,r=a[s],h=i.indexOf(r),l=r.length,n.push({selector:r,type:e,index:h,length:l}),i=i.replace(r,Array(l+1).join(" "))},function(){var t=/:not\(([^\)]*)\)/g;t.test(i)&&(i=i.replace(t,"     $1 "))}(),function(){var t,e,o,n,a=/{[^]*/gm;if(a.test(i))for(t=i.match(a),e=0,o=t.length;o>e;e+=1)n=t[e],i=i.replace(n,Array(n.length+1).join(" "))}(),e(a,"b"),e(s,"a"),e(d,"b"),e(r,"c"),e(h,"b"),e(l,"b"),i=i.replace(/[\*\s\+>~]/g," "),i=i.replace(/[#\.]/g," "),e(p,"c"),n.sort(function(t,e){return t.index-e.index}),{selector:t,specificity:"0,"+o.a.toString()+","+o.b.toString()+","+o.c.toString(),parts:n}},{calculate:t}}();!function(){for(var t,e,i={},o={},n=document.styleSheets,a=0;a<n.length;a++)if(t=n[a],t.cssRules)for(var s=0;s<t.cssRules.length;s++)e=t.cssRules[s],o[e.selectorText]=e;i.resolve=function(t){for(var e=window.getMatchedCSSRules(t)||[],i=[],o=0;o<e.length;o++)i.push([e[o],parseInt(SPECIFICITY.calculate(e[o].selectorText)[0].specificity.replace(/\,/g,""),10)+.01*o]);return i=i.sort(function(t,e){return e[1]-t[1]}).map(function(t){return t[0]})},window.StyleParser=i}(),function(){var t=function(){this.overlayElement=null,this.currentElement=null,this.selectedRule=null,this.hoverGhost=new Ghost,this.over=!1,this.interacting=!1,this.create()};$.extend(t.prototype,{plugins:[],registerPlugin:function(t){this.plugins.push(t),t.create&&t.create.call(t)},callPlugin:function(t,e,i,o,n,a,s){for(var d=0;d<this.plugins.length;d++)this.plugins[d][t]&&this.plugins[d][t].call(this.plugins[d],e,i,o,n,a,s)},sortPlugins:function(){this.plugins.sort(function(t,e){return t.priority>e.priority})},enable:function(){var t=this;this.sortPlugins(),$("body *:not(.overlay,.overlay *,.overlay-title,.overlay-title *)").on("mouseover",function(e){var i=t.hoverElement!==this;return t.hoverElement=this,i&&t.callPlugin("hoverTargetChange",e),t.hoverGhost.currentElement===this||t.interacting||t.over?void 0:(t.hoverGhost.relayout(this),!1)}).on("click",function(){return t.currentElement===this||t.interacting?!1:Date.now()-t.lastInteractionTime<5?!1:(t.currentElement&&t.deactivate(),t.activate(this),!1)})},create:function(){this.createOverlay(),this.init()},createOverlay:function(){this.overlayElement=$('<div id="overlay" class="overlay"></div>')[0],this.containerMarginTop=$('<div class="container-margin top"></div>').appendTo(this.overlayElement)[0],this.containerMarginBottom=$('<div class="container-margin bottom"></div>').appendTo(this.overlayElement)[0],this.containerMarginLeft=$('<div class="container-margin left"></div>').appendTo(this.overlayElement)[0],this.containerMarginRight=$('<div class="container-margin right"></div>').appendTo(this.overlayElement)[0],this.containerPaddingTop=$('<div class="container-padding top"></div>').appendTo(this.overlayElement)[0],this.containerPaddingBottom=$('<div class="container-padding bottom"></div>').appendTo(this.overlayElement)[0],this.containerPaddingLeft=$('<div class="container-padding left"></div>').appendTo(this.overlayElement)[0],this.containerPaddingRight=$('<div class="container-padding right"></div>').appendTo(this.overlayElement)[0],document.body.appendChild(this.overlayElement)},init:function(){this.initHover();var t=this;this.__keyup=function(e){16===e.which&&(t.shiftPressed=!1),18===e.which&&(t.altPressed=!1),27===e.keyCode&&t.deactivate()},this.__keydown=function(e){16===e.which&&(t.shiftPressed=!0),18===e.which&&(t.altPressed=!0)},this.__resize=function(){window.LayoutMode.relayout()},$(document).on("keyup",this.__keyup),$(document).on("keydown",this.__keydown),$(window).on("resize",this.__resize)},initHover:function(){var t=this;$("body").on("mousemove",function(e){t.__lastMouseMoveEvent=e,t.currentElement&&!t.hidden&&t.processOverLogic(e)})},processOverLogic:function(t){var e=10,i=this.currentOffset;t.pageX>i.left-this.marginLeft-e&&t.pageY>i.top-this.marginTop-e&&t.pageX<i.left+this.outerWidth+this.marginRight+e&&t.pageY<i.top+this.outerHeight+this.marginBottom+e?this.over||(this.over=!0,this.overlayElement.classList.add("hover"),this.hoverGhost.overlayElement.style.display="none"):this.over&&!this.interacting&&(this.over=!1,this.overlayElement.classList.remove("hover"),this.hoverGhost.overlayElement.style.display="block"),this.interacting||this.callPlugin("mousemove",t)},calculateHandleSize:function(t,e){var i=16,o=16;return 100>t&&(i=Math.max(8,Math.min(16,i*(t/60)))),100>e&&(o=Math.max(8,Math.min(16,o*(e/60)))),{y:o,x:i}},relayout:function(){var t=this.computedStyle=getComputedStyle(this.currentElement),e=this.overlayElement,i=$(this.currentElement),o=this.currentOffset=i.offset(),n=this.paddingLeft=parseInt(t.paddingLeft),a=this.paddingTop=parseInt(t.paddingTop),s=this.paddingRight=parseInt(t.paddingRight),d=this.paddingBottom=parseInt(t.paddingBottom),r=this.marginLeft=parseInt(t.marginLeft),h=this.marginTop=parseInt(t.marginTop),l=this.marginRight=parseInt(t.marginRight),p=this.marginBottom=parseInt(t.marginBottom),g=this.innerWidth=parseInt(t.width)||this.currentElement.offsetWidth-n-s,u=this.innerHeight=parseInt(t.height)||this.currentElement.offsetHeight-a-d,c=this.outerWidth=g+n+s,y=this.outerHeight=u+a+d;e.style.width=g+"px",e.style.height=u+"px",e.style.transform="translate("+(o.left+n)+"px, "+(o.top+a)+"px)",this.containerPaddingLeft.style.transform="translate("+-n+"px, "+-a+"px) scale("+n+", "+y+")",this.containerPaddingRight.style.transform="translate("+g+"px, "+-a+"px) scale("+s+", "+y+")",this.containerPaddingTop.style.transform="translate(0px, "+-a+"px) scale("+g+", "+a+")",this.containerPaddingBottom.style.transform="translate(0px, "+u+"px) scale("+g+", "+d+")",this.containerMarginLeft.style.transform="translate("+-(n+r)+"px, "+-(a+h)+"px) scale("+r+", "+(y+h+p)+")",this.containerMarginRight.style.transform="translate("+(g+s)+"px, "+-(a+h)+"px) scale("+l+", "+(y+h+p)+")",this.containerMarginTop.style.transform="translate("+-n+"px, "+-(a+h)+"px) scale("+c+", "+h+")",this.containerMarginBottom.style.transform="translate("+-n+"px, "+(u+d)+"px) scale("+c+", "+p+")",this.callPlugin("relayout",{computedStyle:t,offset:o,paddingLeft:n,paddingTop:a,paddingRight:s,paddingBottom:d,marginLeft:r,marginTop:h,marginRight:l,marginBottom:p,innerWidth:g,innerHeight:u,outerWidth:c,outerHeight:y},this.calculateHandleSize(g,u))},getCaptionProperty:function(t){if(this.currentElement.style[t])return this.currentElement.style[t].replace(/(em|px)/," <span>$1</span>");for(var e=0;e<this.matchedRules.length;e++)if(this.matchedRules[e].style[t])return this.matchedRules[e].style[t].replace(/(em|px)/," <span>$1</span>");var i="";return t.indexOf("margin")>-1||t.indexOf("padding")>-1?i=this[t]:"height"===t?i=this.innerHeight:"width"===t&&(i=this.innerWidth),"("+i+" <span>px</span>)"},activate:function(t){this.currentElement=t,this.computedStyle=getComputedStyle(this.currentElement),this.overlayElement.classList.add("hover"),this.overlayElement.style.display="block",this.over=!0,"inline"===this.computedStyle.display?this.overlayElement.classList.add("hover-inline"):this.overlayElement.classList.remove("hover-inline"),this.hoverGhost.overlayElement.style.display="none",this.matchedRules=StyleParser.resolve(this.currentElement),this.callPlugin("activate"),this.relayout()},deactivate:function(){this.selectedRule&&this.exitRuleMode(),this.overlayElement.classList.remove("hover","hidden"),this.overlayElement.style.display="none",this.callPlugin("deactivate"),this.over=!1,this.currentElement=null},enterRuleMode:function(t,e){this.selectedRule!==t&&(this.selectedRule?(this.selectedRule=t,this.callPlugin("changeRule",e)):(this.selectedRule=t,this.callPlugin("enterRule",e)))},exitRuleMode:function(){this.callPlugin("exitRule"),this.selectedRule=null},selectRule:function(t){for(var e=0;e<this.matchedRules.length;e++)if(this.matchedRules[e].style[t])return void this.enterRuleMode(this.matchedRules[e],e);this.exitRuleMode()},deselectRule:function(){this.exitRuleMode()},show:function(){this.hidden=!1,this.over=this.__lastOver,this.over&&this.overlayElement.classList.add("hover"),this.overlayElement.classList.remove("hidden"),this.__lastMouseMoveEvent&&this.processOverLogic(this.__lastMouseMoveEvent),this.hoverGhost.overlayElement.style.visibility="",this.callPlugin("show")},hide:function(){this.hidden=!0,this.__lastOver=this.over,this.over=!1,this.overlayElement.classList.remove("hover"),this.overlayElement.classList.add("hidden"),this.hoverGhost.overlayElement.style.visibility="hidden",this.callPlugin("hide")}}),window.LayoutMode=new t}(),LayoutMode.registerPlugin({create:function(){this.titleBox=$('<div class="overlay-title"><div class="title-rule"><span class="selected">inline style</span> <span class="toggle">▾</span><ul class="dropdown"><li>inline style</li></ul></div><div class="title-proportions">100 x 100</div></div>').appendTo(document.body)[0],this.titleProportions=$(".title-proportions",this.titleBox)[0],this.titleDropdown=$(".dropdown",this.titleBox)},activate:function(){var t=this.titleBox,e=this.titleDropdown;$("span",t).click(function(){$(".dropdown",t).toggle()}),e.on("click","li",function(){e.hide(),$(".selected",t).html(this.innerHTML)}),this.fillRules()},deactivate:function(){this.titleBox.style.opacity=0,$("span",this.titleBox).off("click"),$("span",this.titleDropdown).off("click")},enterRule:function(t){this.titleBox.classList.add("rule"),LayoutMode.overlayElement.style.zIndex=10002,this.changeRule(t)},changeRule:function(t){this.titleDropdown.find("li:eq("+(t+1)+")").click()},exitRule:function(){$("span.selected",this.titleBox).html("inline style"),this.titleBox.classList.remove("rule"),LayoutMode.overlayElement.style.zIndex=""},relayout:function(t){var e=LayoutMode.currentOffset;this.titleBox.style.opacity=1,this.titleBox.style.transform="translate("+(e.left+(t.outerWidth-this.titleBox.offsetWidth)/2)+"px, "+(e.top-t.marginTop-55)+"px)",this.titleProportions.innerHTML=t.outerWidth+" x "+t.outerHeight},show:function(){this.titleBox.style.opacity=1},hide:function(){this.titleBox.style.opacity=0},fillRules:function(){var t=LayoutMode.matchedRules;this.titleDropdown.empty(),$("<li>inline style</li>").appendTo(this.titleDropdown);for(var e=0;e<t.length;e++)$("<li>"+t[e].selectorText+"</li>").data("cssRule",t[e]).appendTo(this.titleDropdown)}}),LayoutMode.registerPlugin({create:function(){var t=LayoutMode.overlayElement;this.guideMarginLeft=$('<div class="guide guide-margin-left"></div>').appendTo(t)[0],this.guideMarginRight=$('<div class="guide guide-margin-right"></div>').appendTo(t)[0],this.guideMarginBottom=$('<div class="guide guide-margin-bottom"></div>').appendTo(t)[0],this.guideMarginTop=$('<div class="guide guide-margin-top"></div>').appendTo(t)[0],this.guidePaddingLeft=$('<div class="guide guide-padding-left"></div>').appendTo(t)[0],this.guidePaddingRight=$('<div class="guide guide-padding-right"></div>').appendTo(t)[0],this.guidePaddingBottom=$('<div class="guide guide-padding-bottom"></div>').appendTo(t)[0],this.guidePaddingTop=$('<div class="guide guide-padding-top"></div>').appendTo(t)[0]},relayout:function(t){this.guidePaddingLeft.style.transform="translate(0px, "+(-t.offset.top-t.paddingTop)+"px)",this.guidePaddingLeft.style.height=window.innerHeight+"px",this.guidePaddingLeft.style.left=-t.paddingLeft+"px",this.guidePaddingRight.style.transform="translate(0px, "+(-t.offset.top-t.paddingTop)+"px)",this.guidePaddingRight.style.height=window.innerHeight+"px",this.guidePaddingRight.style.right=-t.paddingRight-1+"px",this.guidePaddingBottom.style.transform="translate("+(-t.offset.left-t.paddingLeft)+"px, 0px)",this.guidePaddingBottom.style.width=window.innerWidth+"px",this.guidePaddingBottom.style.bottom=-t.paddingBottom-1+"px",this.guidePaddingTop.style.transform="translate("+(-t.offset.left-t.paddingLeft)+"px, 0px)",this.guidePaddingTop.style.width=window.innerWidth+"px",this.guidePaddingTop.style.top=-t.paddingTop-1+"px",this.guideMarginLeft.style.transform="translate(0px, "+(-t.offset.top-t.paddingTop)+"px)",this.guideMarginLeft.style.height=window.innerHeight+"px",this.guideMarginLeft.style.left=-t.paddingLeft-t.marginLeft+"px",this.guideMarginRight.style.transform="translate(0px, "+(-t.offset.top-t.paddingTop)+"px)",this.guideMarginRight.style.height=window.innerHeight+"px",this.guideMarginRight.style.right=-t.paddingRight-t.marginRight-1+"px",this.guideMarginBottom.style.transform="translate("+(-t.offset.left-t.paddingLeft)+"px, 0px)",this.guideMarginBottom.style.width=window.innerWidth+"px",this.guideMarginBottom.style.bottom=-t.paddingBottom-t.marginBottom-1+"px",this.guideMarginTop.style.transform="translate("+(-t.offset.left-t.paddingLeft)+"px, 0px)",this.guideMarginTop.style.width=window.innerWidth+"px",this.guideMarginTop.style.top=-t.paddingTop-t.marginTop-1+"px"}}),LayoutMode.registerPlugin({create:function(){},activate:function(){},deactivate:function(){},enterRule:function(){this.createGhosts()},changeRule:function(){this.destroyGhosts(),this.createGhosts()},exitRule:function(){this.destroyGhosts()},relayout:function(){this.updateGhosts()},ghosts:[],createGhosts:function(){var t=this.ghosts;$(LayoutMode.selectedRule.selectorText).not(LayoutMode.currentElement).not(".overlay, .overlay *").each(function(){var e=new Ghost(this);e.relayout(),t.push(e)})},destroyGhosts:function(){for(var t=0;t<this.ghosts.length;t++)this.ghosts[t].destroy();this.ghosts=[]},updateGhosts:function(){if(this.ghosts)for(var t=0;t<this.ghosts.length;t++)this.ghosts[t].relayout()}}),LayoutMode.registerPlugin({activate:function(){LayoutMode.currentElement.setAttribute("contentEditable",!0),LayoutMode.currentElement.style.outline="none",LayoutMode.currentElement.focus(),$(document).on("keyup",this.keyup)},deactivate:function(){LayoutMode.currentElement.removeAttribute("contentEditable"),LayoutMode.currentElement.style.outline="",$(document).off("keyup",this.keyup)},keyup:function(){LayoutMode.relayout()}}),LayoutMode.registerPlugin({create:function(){},activate:function(){var t=this;$(document).on("keydown",function(e){91===e.keyCode&&t.enable()}).on("keyup",function(e){91===e.keyCode&&t.disable()})},deactivate:function(){this.disable()},hoverTargetChange:function(t){return this.enabled&&this.processCommandOverLogic(t),this.enabled&&LayoutMode.currentElement&&LayoutMode.hoverElement!==LayoutMode.currentElement&&!$.contains(LayoutMode.hoverElement,LayoutMode.currentElement)&&!$.contains(LayoutMode.currentElement,LayoutMode.hoverElement)?(this.visualizeRelationTo(LayoutMode.hoverElement),!1):void 0},enable:function(){this.enabled=!0,LayoutMode.hide(),LayoutMode.__lastMouseMoveEvent&&this.processCommandOverLogic(LayoutMode.__lastMouseMoveEvent),LayoutMode.hoverElement===LayoutMode.currentElement||$.contains(LayoutMode.hoverElement,LayoutMode.currentElement)||$.contains(LayoutMode.currentElement,LayoutMode.hoverElement)||this.visualizeRelationTo(LayoutMode.hoverElement)},disable:function(){this.enabled=!1,this.commandOver=!1,this.vLineX&&(this.vLineX.style.opacity=0),this.vLineY&&(this.vLineY.style.opacity=0),LayoutMode.show()},processCommandOverLogic:function(t){var e=10,i=LayoutMode.currentOffset;t.pageX>i.left-LayoutMode.marginLeft-e&&t.pageY>i.top-LayoutMode.marginTop-e&&t.pageX<i.left+LayoutMode.outerWidth+LayoutMode.marginRight+e&&t.pageY<i.top+LayoutMode.outerHeight+LayoutMode.marginBottom+e?this.commandOver||(this.commandOver=!0,this.visualizeRelationToWindow()):this.commandOver&&(this.commandOver=!1)},createVisualizationLines:function(){this.vLineX||(this.vLineX=document.createElement("div"),this.vLineX.className="vline-x",document.body.appendChild(this.vLineX),this.vLineXCaption=document.createElement("div"),this.vLineXCaption.className="caption",this.vLineX.appendChild(this.vLineXCaption),this.vLineXCrossBar=document.createElement("div"),this.vLineXCrossBar.className="crossbar",this.vLineX.appendChild(this.vLineXCrossBar)),this.vLineY||(this.vLineY=document.createElement("div"),this.vLineY.className="vline-y",document.body.appendChild(this.vLineY),this.vLineYCaption=document.createElement("div"),this.vLineYCaption.className="caption",this.vLineY.appendChild(this.vLineYCaption),this.vLineYCrossBar=document.createElement("div"),this.vLineYCrossBar.className="crossbar",this.vLineY.appendChild(this.vLineYCrossBar))},visualizeRelationToWindow:function(){var t=LayoutMode.currentElement;this.createVisualizationLines(),this.vLineX.style.opacity=1,this.vLineX.style.top=LayoutMode.currentOffset.top+t.offsetHeight/2+"px",this.vLineX.style.left="0px",this.vLineX.style.width=LayoutMode.currentOffset.left+"px",this.vLineXCaption.innerHTML=LayoutMode.currentOffset.left+" <span>px</span>",this.vLineY.style.opacity=1,this.vLineY.style.left=LayoutMode.currentOffset.left+t.offsetWidth/2+"px",this.vLineY.style.top="0px",this.vLineY.style.height=LayoutMode.currentOffset.top+"px",this.vLineYCaption.innerHTML=LayoutMode.currentOffset.top+" <span>px</span>"},visualizeRelationTo:function(t){var e,i,o=LayoutMode.currentElement,n=LayoutMode.currentOffset,a=$(t).offset();this.createVisualizationLines();var s=a.left+t.offsetWidth,d=n.left+o.offsetWidth,r=a.left,h=n.left,l=a.top+t.offsetHeight,p=n.top+o.offsetHeight,g=a.top,u=n.top;h>s?(e=n.top+o.offsetHeight/2,this.vLineX.style.opacity=1,this.vLineX.style.top=e+"px",this.vLineX.style.left=s+"px",this.vLineX.style.width=h-s+"px",this.vLineXCaption.innerHTML=h-s+" <span>px</span>",e>l?(this.vLineXCrossBar.style.display="block",this.vLineXCrossBar.style.left="0px",this.vLineXCrossBar.style.bottom="0px",this.vLineXCrossBar.style.top="auto",this.vLineXCrossBar.style.height=o.offsetHeight/2+(u-l)+"px"):g>e?(this.vLineXCrossBar.style.display="block",this.vLineXCrossBar.style.left="0px",this.vLineXCrossBar.style.top="0px",this.vLineXCrossBar.style.bottom="auto",this.vLineXCrossBar.style.height=o.offsetHeight/2+(g-p)+"px"):this.vLineXCrossBar.style.display="none"):r>d?(e=n.top+o.offsetHeight/2,this.vLineX.style.opacity=1,this.vLineX.style.top=e+"px",this.vLineX.style.left=d+"px",this.vLineX.style.width=r-d+"px",this.vLineXCaption.innerHTML=r-d+" <span>px</span>",e>l?(this.vLineXCrossBar.style.display="block",this.vLineXCrossBar.style.left="100%",this.vLineXCrossBar.style.bottom="0px",this.vLineXCrossBar.style.top="auto",this.vLineXCrossBar.style.height=o.offsetHeight/2+(u-l)+"px"):g>e?(this.vLineXCrossBar.style.display="block",this.vLineXCrossBar.style.left="100%",this.vLineXCrossBar.style.top="0px",this.vLineXCrossBar.style.bottom="auto",this.vLineXCrossBar.style.height=o.offsetHeight/2+(g-p)+"px"):this.vLineXCrossBar.style.display="none"):this.vLineX.style.opacity=0,u>l?(i=n.left+o.offsetWidth/2,this.vLineY.style.opacity=1,this.vLineY.style.left=i+"px",this.vLineY.style.top=l+"px",this.vLineY.style.height=u-l+"px",this.vLineYCaption.innerHTML=u-l+" <span>px</span>",i>s?(this.vLineYCrossBar.style.display="block",this.vLineYCrossBar.style.top="0px",this.vLineYCrossBar.style.right="0px",this.vLineYCrossBar.style.left="auto",this.vLineYCrossBar.style.width=o.offsetWidth/2+(h-s)+"px"):r>i?(this.vLineYCrossBar.style.display="block",this.vLineYCrossBar.style.top="0px",this.vLineYCrossBar.style.left="0px",this.vLineYCrossBar.style.right="auto",this.vLineYCrossBar.style.width=o.offsetWidth/2+(r-d)+"px"):this.vLineYCrossBar.style.display="none"):g>p?(i=n.left+o.offsetWidth/2,this.vLineY.style.opacity=1,this.vLineY.style.left=i+"px",this.vLineY.style.top=p+"px",this.vLineY.style.height=g-p+"px",this.vLineYCaption.innerHTML=g-p+" <span>px</span>",i>s?(this.vLineYCrossBar.style.display="block",this.vLineYCrossBar.style.top="100%",this.vLineYCrossBar.style.right="0px",this.vLineYCrossBar.style.left="auto",this.vLineYCrossBar.style.width=o.offsetWidth/2+(h-s)+"px"):r>i?(this.vLineYCrossBar.style.display="block",this.vLineYCrossBar.style.top="100%",this.vLineYCrossBar.style.left="0px",this.vLineYCrossBar.style.right="auto",this.vLineYCrossBar.style.width=o.offsetWidth/2+(r-d)+"px"):this.vLineYCrossBar.style.display="none"):this.vLineY.style.opacity=0}}),LayoutMode.registerPlugin({priority:0,create:function(){this.handleHeight=$('<div class="handle bottom handle-size"></div>').appendTo(LayoutMode.overlayElement),this.handleWidth=$('<div class="handle right handle-size"></div>').appendTo(LayoutMode.overlayElement),this.captionWidth=$('<div class="caption caption-width"></div>').appendTo(LayoutMode.overlayElement)[0],this.captionHeight=$('<div class="caption caption-height"></div>').appendTo(LayoutMode.overlayElement)[0],this.initDraggers()},deactivate:function(){this.overInner=!1,LayoutMode.overSize=!1,LayoutMode.overlayElement.classList.remove("hover-inner")},show:function(){this.overInner&&LayoutMode.overlayElement.classList.add("hover-inner")},hide:function(){LayoutMode.overlayElement.classList.remove("hover-inner")},mousemove:function(t){var e=LayoutMode.currentOffset;t.pageX>e.left+LayoutMode.paddingLeft&&t.pageY>e.top+LayoutMode.paddingTop&&t.pageX<e.left+LayoutMode.outerWidth-LayoutMode.paddingRight&&t.pageY<e.top+LayoutMode.outerHeight-LayoutMode.paddingBottom&&!t.target.classList.contains("handle-padding")&&!t.target.classList.contains("handle-margin")?this.overInner||(LayoutMode.overlayElement.classList.add("hover-inner"),this.overInner=!0):this.overInner&&(this.overInner=!1,LayoutMode.overlayElement.classList.remove("hover-inner")),this.processOverWidth(t),this.processOverHeight(t)},relayout:function(t,e){this.handleWidth[0].style.height=e.y+"px",this.handleHeight[0].style.width=e.x+"px",this.handleWidth[0].style.marginTop=(t.paddingRight<20?+(e.y/4*t.paddingRight/5)-1.5*e.y:-(e.y/2))+"px",this.captionWidth.style.marginTop=(t.paddingRight<20?+(e.y/4*t.paddingRight/5)-1.5*e.y:-8)+"px",this.handleHeight[0].style.marginLeft=(t.paddingBottom<20?+(e.x/4*t.paddingBottom/5)-1.5*e.x:-(e.x/2))+"px",this.captionHeight.style.marginLeft=(t.paddingBottom<20?e.x*(t.paddingBottom/20)-2*e.x+e.x-9:-10)+"px",this.refreshCaptions()},processOverWidth:function(t){var e=LayoutMode.currentOffset;t.pageX>e.left+LayoutMode.paddingLeft+LayoutMode.innerWidth-5&&t.pageY>e.top+LayoutMode.paddingTop&&t.pageX<e.left+LayoutMode.outerWidth-LayoutMode.paddingRight&&t.pageY<e.top+LayoutMode.outerHeight-LayoutMode.paddingBottom&&!t.target.classList.contains("handle-padding")&&!t.target.classList.contains("handle-margin")?this.overWidth||(document.body.classList.add("resize-width"),this.captionWidth.classList.add("over"),this.refreshCaptions(),LayoutMode.selectRule("width"),this.overWidth=!0,LayoutMode.overSize=!0):this.overWidth&&(this.overWidth=!1,LayoutMode.overSize=!1,document.body.classList.remove("resize-width"),this.captionWidth.classList.remove("over"),this.refreshCaptions(),LayoutMode.deselectRule())},processOverHeight:function(t){var e=LayoutMode.currentOffset;t.pageY>e.top+LayoutMode.paddingTop+LayoutMode.innerHeight-5&&t.pageX>e.left+LayoutMode.paddingLeft&&t.pageY<e.top+LayoutMode.outerHeight-LayoutMode.paddingBottom&&t.pageX<e.left+LayoutMode.outerWidth-LayoutMode.paddingRight&&!t.target.classList.contains("handle-padding")&&!t.target.classList.contains("handle-margin")?this.overHeight||(document.body.classList.add("resize-height"),this.captionHeight.classList.add("over"),this.refreshCaptions(),LayoutMode.selectRule("height"),this.overHeight=!0,LayoutMode.overSize=!0):this.overHeight&&(this.overHeight=!1,LayoutMode.overSize=!1,document.body.classList.remove("resize-height"),this.captionHeight.classList.remove("over"),this.refreshCaptions(),LayoutMode.deselectRule())},refreshCaptions:function(){var t,e=LayoutMode.currentOffset;t=e.left+this.outerWidth+80>window.innerWidth,this.captionWidth.classList[t?"add":"remove"]("edge"),this.captionWidth.innerHTML="<span>width: </span>"+LayoutMode.getCaptionProperty("width"),this.captionWidth.style.right=(t?16:-(this.captionWidth.offsetWidth+13))+"px",this.captionHeight.innerHTML="<span>height: </span>"+LayoutMode.getCaptionProperty("height")},initDraggers:function(){var t=this,e="ontouchstart"in document;$(document).on(e?"touchstart":"mousedown",function(e){if(t.overWidth){var i=LayoutMode.innerWidth;new Dragger(e.originalEvent,{vertical:!1,move:function(t){t=LayoutMode.shiftPressed?t:t/4,(LayoutMode.selectedRule||LayoutMode.currentElement).style.width=Math.round(Math.max(0,i-t))+"px",LayoutMode.relayout()}})}else if(t.overHeight){var o=LayoutMode.innerHeight;new Dragger(e.originalEvent,{vertical:!0,move:function(t){t=LayoutMode.shiftPressed?t:t/4,(LayoutMode.selectedRule||LayoutMode.currentElement).style.height=Math.round(Math.max(0,o-t))+"px",LayoutMode.relayout()}})}})}}),LayoutMode.registerPlugin({priority:1,create:function(){this.handlePaddingBottom=$('<div class="handle bottom handle-padding"></div>').appendTo(LayoutMode.overlayElement),this.handlePaddingRight=$('<div class="handle right handle-padding"></div>').appendTo(LayoutMode.overlayElement),this.handlePaddingTop=$('<div class="handle top handle-padding"></div>').appendTo(LayoutMode.overlayElement),this.handlePaddingLeft=$('<div class="handle left handle-padding"></div>').appendTo(LayoutMode.overlayElement);var t=this;this.handlePaddingTop.hover(function(){t.overTopHandle=!0},function(){t.overTopHandle=!1}),this.handlePaddingBottom.hover(function(){t.overBottomHandle=!0},function(){t.overBottomHandle=!1}),this.handlePaddingLeft.hover(function(){t.overLeftHandle=!0},function(){t.overLeftHandle=!1}),this.handlePaddingRight.hover(function(){t.overRightHandle=!0},function(){t.overRightHandle=!1}),this.captionPaddingLeft=$('<div class="caption caption-padding left"></div>').appendTo(LayoutMode.overlayElement)[0],this.captionPaddingRight=$('<div class="caption caption-padding right"></div>').appendTo(LayoutMode.overlayElement)[0],this.captionPaddingTop=$('<div class="caption caption-padding top"></div>').appendTo(LayoutMode.overlayElement)[0],this.captionPaddingBottom=$('<div class="caption caption-padding bottom"></div>').appendTo(LayoutMode.overlayElement)[0],this.initDraggers()},deactivate:function(){this.overPadding=!1,LayoutMode.overPadding=!1,LayoutMode.overlayElement.classList.remove("hover-padding")},show:function(){this.overPadding&&LayoutMode.overlayElement.classList.add("hover-padding")},hide:function(){LayoutMode.overlayElement.classList.remove("hover-padding")},mousemove:function(t){var e=LayoutMode.currentOffset,i=5,o=t.pageY>e.top-5&&t.pageY<e.top+5,n=t.pageY>e.top+LayoutMode.outerHeight-i&&t.pageY<e.top+LayoutMode.outerHeight+i,a=t.pageX>e.left-i&&t.pageX<e.left+i,s=t.pageX>e.left+LayoutMode.outerWidth-i&&t.pageX<e.left+LayoutMode.outerWidth+i,d=t.pageX>e.left+LayoutMode.paddingLeft&&t.pageX<e.left+LayoutMode.paddingLeft+LayoutMode.innerWidth&&t.pageY>e.top&&t.pageY<e.top+LayoutMode.paddingTop||this.overTopHandle||o,r=t.pageX>e.left+LayoutMode.paddingLeft&&t.pageX<e.left+LayoutMode.paddingLeft+LayoutMode.innerWidth&&t.pageY>e.top+LayoutMode.outerHeight-LayoutMode.paddingBottom&&t.pageY<e.top+LayoutMode.outerHeight||this.overBottomHandle||n,h=t.pageY>e.top+LayoutMode.paddingTop&&t.pageY<e.top+LayoutMode.paddingTop+LayoutMode.innerHeight&&t.pageX>e.left&&t.pageX<e.left+LayoutMode.paddingLeft||this.overLeftHandle||a,l=t.pageY>e.top+LayoutMode.paddingTop&&t.pageY<e.top+LayoutMode.paddingTop+LayoutMode.innerHeight&&t.pageX>e.left+LayoutMode.outerWidth-LayoutMode.paddingRight&&t.pageX<e.left+LayoutMode.outerWidth||this.overRightHandle||s,p=!LayoutMode.overSize&&!t.target.classList.contains("handle-margin");(d||r||h||l)&&p?this.overPadding||(LayoutMode.overlayElement.classList.add("hover-padding"),this.overPadding=!0,LayoutMode.overPadding=!0):this.overPadding&&(this.overPadding=!1,LayoutMode.overPadding=!1,LayoutMode.overlayElement.classList.remove("hover-padding"));var g=!1,u=!1;d&&p?this.overPaddingTop||(this.overPaddingTop=!0,this.captionPaddingTop.classList.add("over"),document.body.classList.add("resize-padding-top"),g=!0):this.overPaddingTop&&(this.overPaddingTop=!1,this.captionPaddingTop.classList.remove("over"),u=!0),r&&p?this.overPaddingBottom||(this.overPaddingBottom=!0,this.captionPaddingBottom.classList.add("over"),document.body.classList.add("resize-padding-bottom"),g=!0):this.overPaddingBottom&&(this.overPaddingBottom=!1,this.captionPaddingBottom.classList.remove("over"),u=!0),h&&p?this.overPaddingLeft||(this.overPaddingLeft=!0,this.captionPaddingLeft.classList.add("over"),document.body.classList.add("resize-padding-left"),g=!0):this.overPaddingLeft&&(this.overPaddingLeft=!1,this.captionPaddingLeft.classList.remove("over"),u=!0),l&&p?this.overPaddingRight||(this.overPaddingRight=!0,this.captionPaddingRight.classList.add("over"),document.body.classList.add("resize-padding-right"),g=!0):this.overPaddingRight&&(this.overPaddingRight=!1,this.captionPaddingRight.classList.remove("over"),
u=!0),!g&&u&&document.body.classList.remove("resize-padding-top","resize-padding-bottom","resize-padding-left","resize-padding-right")},relayout:function(t,e){this.handlePaddingLeft[0].style.height=e.y+"px",this.handlePaddingRight[0].style.height=e.y+"px",this.handlePaddingTop[0].style.width=e.x+"px",this.handlePaddingBottom[0].style.width=e.x+"px",this.handlePaddingLeft[0].style.transform="translate("+-t.paddingLeft+"px, 0px)",this.handlePaddingRight[0].style.marginRight=-t.paddingRight+"px",this.handlePaddingTop[0].style.transform="translate(0px, "+-t.paddingTop+"px)",this.handlePaddingBottom[0].style.marginBottom=-t.paddingBottom+"px",this.handlePaddingLeft[0].style.marginTop=-(e.y/2)+"px",this.handlePaddingRight[0].style.marginTop=-(e.y/2)+"px",this.handlePaddingTop[0].style.marginLeft=-(e.x/2)+"px",this.handlePaddingBottom[0].style.marginLeft=-(e.x/2)+"px",this.refreshCaptions()},refreshCaptions:function(){var t,e,i=LayoutMode.currentOffset;this.captionPaddingLeft.innerHTML="<span>padding-left: </span>"+LayoutMode.getCaptionProperty("paddingLeft"),this.captionPaddingRight.innerHTML="<span>padding-right: </span>"+LayoutMode.getCaptionProperty("paddingRight"),this.captionPaddingTop.innerHTML="<span>padding-top: </span>"+LayoutMode.getCaptionProperty("paddingTop"),this.captionPaddingBottom.innerHTML="<span>padding-bottom: </span>"+LayoutMode.getCaptionProperty("paddingBottom"),e=i.left-80<0,this.captionPaddingLeft.classList[e?"add":"remove"]("edge"),this.captionPaddingLeft.style.marginRight=(e?LayoutMode.paddingLeft-this.captionPaddingLeft.offsetWidth-16:LayoutMode.paddingLeft+14)+"px",t=i.left+LayoutMode.outerWidth+80>window.innerWidth,this.captionPaddingRight.classList[t?"add":"remove"]("edge"),this.captionPaddingRight.style.marginLeft=(t?LayoutMode.paddingRight-this.captionPaddingRight.offsetWidth-16:LayoutMode.paddingRight+14)+"px",this.captionPaddingBottom.style.bottom=-(LayoutMode.paddingBottom+24)+"px",this.captionPaddingTop.style.top=-(LayoutMode.paddingTop+24)+"px"},initDraggers:function(){var t=this,e="ontouchstart"in document;$(document).on(e?"touchstart":"mousedown",function(e){var i,o,n,a;t.overPaddingBottom&&(i=LayoutMode.paddingBottom,o=LayoutMode.paddingTop,new Dragger(e.originalEvent,{vertical:!0,move:function(t){t=LayoutMode.shiftPressed?t:t/4,(LayoutMode.selectedRule||LayoutMode.currentElement).style.paddingBottom=Math.round(Math.max(0,i-t))+"px",(LayoutMode.selectedRule||LayoutMode.currentElement).style.paddingTop=LayoutMode.altPressed?Math.round(Math.max(0,i-t))+"px":o+"px",LayoutMode.relayout()}})),t.overPaddingTop&&(o=LayoutMode.paddingTop,i=LayoutMode.paddingBottom,new Dragger(e.originalEvent,{vertical:!0,move:function(t){t=LayoutMode.shiftPressed?t:t/4,(LayoutMode.selectedRule||LayoutMode.currentElement).style.paddingTop=Math.round(Math.max(0,o+t))+"px",(LayoutMode.selectedRule||LayoutMode.currentElement).style.paddingBottom=LayoutMode.altPressed?Math.round(Math.max(0,o+t))+"px":i+"px",LayoutMode.relayout()}})),t.overPaddingRight&&(n=LayoutMode.paddingRight,a=LayoutMode.paddingLeft,new Dragger(e.originalEvent,{vertical:!1,move:function(t){t=LayoutMode.shiftPressed?t:t/4,(LayoutMode.selectedRule||LayoutMode.currentElement).style.paddingRight=Math.round(Math.max(0,n-t))+"px",(LayoutMode.selectedRule||LayoutMode.currentElement).style.paddingLeft=LayoutMode.altPressed?Math.round(Math.max(0,n-t))+"px":a+"px",LayoutMode.relayout()}})),t.overPaddingLeft&&(a=LayoutMode.paddingLeft,n=LayoutMode.paddingRight,new Dragger(e.originalEvent,{vertical:!1,move:function(t){t=LayoutMode.shiftPressed?t:t/4,(LayoutMode.selectedRule||LayoutMode.currentElement).style.paddingLeft=Math.round(Math.max(0,a+t))+"px",(LayoutMode.selectedRule||LayoutMode.currentElement).style.paddingRight=LayoutMode.altPressed?Math.round(Math.max(0,a+t))+"px":n+"px",LayoutMode.relayout()}}))})}}),LayoutMode.registerPlugin({priority:2,create:function(){this.handleMarginBottom=$('<div class="handle bottom handle-margin"></div>').appendTo(LayoutMode.overlayElement),this.handleMarginRight=$('<div class="handle right handle-margin"></div>').appendTo(LayoutMode.overlayElement),this.handleMarginTop=$('<div class="handle top handle-margin"></div>').appendTo(LayoutMode.overlayElement),this.handleMarginLeft=$('<div class="handle left handle-margin"></div>').appendTo(LayoutMode.overlayElement);var t=this;this.handleMarginTop.hover(function(){t.overTopHandle=!0},function(){t.overTopHandle=!1}),this.handleMarginBottom.hover(function(){t.overBottomHandle=!0},function(){t.overBottomHandle=!1}),this.handleMarginLeft.hover(function(){t.overLeftHandle=!0},function(){t.overLeftHandle=!1}),this.handleMarginRight.hover(function(){t.overRightHandle=!0},function(){t.overRightHandle=!1}),this.captionMarginLeft=$('<div class="caption caption-margin left"></div>').appendTo(LayoutMode.overlayElement)[0],this.captionMarginRight=$('<div class="caption caption-margin right"></div>').appendTo(LayoutMode.overlayElement)[0],this.captionMarginTop=$('<div class="caption caption-margin top"></div>').appendTo(LayoutMode.overlayElement)[0],this.captionMarginBottom=$('<div class="caption caption-margin bottom"></div>').appendTo(LayoutMode.overlayElement)[0],this.initDraggers()},deactivate:function(){this.overMargin=!1,LayoutMode.overlayElement.classList.remove("hover-margin")},show:function(){this.overMargin&&LayoutMode.overlayElement.classList.add("hover-margin")},hide:function(){LayoutMode.overlayElement.classList.remove("hover-margin")},mousemove:function(t){var e=LayoutMode.currentOffset,i=5,o=t.pageY>e.top-LayoutMode.marginTop-i&&t.pageY<e.top-LayoutMode.marginTop+i,n=t.pageY>e.top+LayoutMode.outerHeight+LayoutMode.marginBottom-i&&t.pageY<e.top+LayoutMode.outerHeight+LayoutMode.marginBottom+i,a=t.pageX>e.left-LayoutMode.marginLeft-i&&t.pageX<e.left-LayoutMode.marginLeft+i,s=t.pageX>e.left+LayoutMode.outerWidth+LayoutMode.marginRight-i&&t.pageX<e.left+LayoutMode.outerWidth+LayoutMode.marginRight+i,d=t.pageX>e.left&&t.pageX<e.left+LayoutMode.outerWidth&&t.pageY>e.top-LayoutMode.marginTop&&t.pageY<e.top||this.overTopHandle||o,r=t.pageX>e.left&&t.pageX<e.left+LayoutMode.outerWidth&&t.pageY>e.top+LayoutMode.outerHeight&&t.pageY<e.top+LayoutMode.outerHeight+LayoutMode.marginBottom||this.overBottomHandle||n,h=t.pageY>e.top&&t.pageY<e.top+LayoutMode.outerHeight&&t.pageX>e.left-LayoutMode.marginLeft&&t.pageX<e.left||this.overLeftHandle||a,l=t.pageY>e.top&&t.pageY<e.top+LayoutMode.outerHeight&&t.pageX>e.left+LayoutMode.outerWidth&&t.pageX<e.left+LayoutMode.outerWidth+LayoutMode.marginRight||this.overRightHandle||s,p=!LayoutMode.overSize&&!LayoutMode.overPadding&&!t.target.classList.contains("handle-padding");(d||r||h||l)&&p?this.overMargin||(LayoutMode.overlayElement.classList.add("hover-margin"),this.overMargin=!0):this.overMargin&&(this.overMargin=!1,LayoutMode.overlayElement.classList.remove("hover-margin"));var g=!1,u=!1;d&&p?this.overMarginTop||(this.overMarginTop=!0,this.captionMarginTop.classList.add("over"),document.body.classList.add("resize-margin-top"),g=!0):this.overMarginTop&&(this.overMarginTop=!1,this.captionMarginTop.classList.remove("over"),u=!0),r&&p?this.overMarginBottom||(this.overMarginBottom=!0,this.captionMarginBottom.classList.add("over"),document.body.classList.add("resize-margin-bottom"),g=!0):this.overMarginBottom&&(this.overMarginBottom=!1,this.captionMarginBottom.classList.remove("over"),u=!0),h&&p?this.overMarginLeft||(this.overMarginLeft=!0,this.captionMarginLeft.classList.add("over"),document.body.classList.add("resize-margin-left"),g=!0):this.overMarginLeft&&(this.overMarginLeft=!1,this.captionMarginLeft.classList.remove("over"),u=!0),l&&p?this.overMarginRight||(this.overMarginRight=!0,this.captionMarginRight.classList.add("over"),document.body.classList.add("resize-margin-right"),g=!0):this.overMarginRight&&(this.overMarginRight=!1,this.captionMarginRight.classList.remove("over"),u=!0),!g&&u&&document.body.classList.remove("resize-margin-top","resize-margin-bottom","resize-margin-left","resize-margin-right")},relayout:function(t,e){this.handleMarginLeft[0].style.height=e.y+"px",this.handleMarginRight[0].style.height=e.y+"px",this.handleMarginTop[0].style.width=e.x+"px",this.handleMarginBottom[0].style.width=e.x+"px",this.handleMarginLeft[0].style.marginLeft=-(t.paddingLeft+t.marginLeft)+"px",this.handleMarginRight[0].style.marginRight=-(t.paddingRight+t.marginRight)+"px",this.handleMarginTop[0].style.marginTop=-(t.paddingTop+t.marginTop)+"px",this.handleMarginBottom[0].style.marginBottom=-(t.paddingBottom+t.marginBottom)+"px",this.handleMarginLeft[0].style.marginTop=(t.marginLeft<20?-(e.y/4*t.marginLeft/5)+e.y/2:-(e.y/2))+"px",this.captionMarginLeft.style.marginTop=(t.marginLeft<20?-(e.y/4*t.marginLeft/5)-8+e.y:-8)+"px",this.handleMarginRight[0].style.marginTop=(t.marginRight<20?-(e.y/4*t.marginRight/5)+e.y/2:-(e.y/2))+"px",this.captionMarginRight.style.marginTop=(t.marginRight<20?-(e.y/4*t.marginRight/5)-8+e.y:-8)+"px",this.handleMarginTop[0].style.marginLeft=(t.marginTop<20?-(e.x/4*t.marginTop/5)+e.x/2:-(e.x/2))+"px",this.captionMarginTop.style.marginLeft=(t.marginTop<20?e.x+-e.x*(t.marginTop/20)-8:-11)+"px",this.handleMarginBottom[0].style.marginLeft=(t.marginBottom<20?-(e.x/4*t.marginBottom/5)+e.x/2:-(e.x/2))+"px",this.captionMarginBottom.style.marginLeft=(t.marginBottom<20?e.x+-e.x*(t.marginBottom/20)-8:-11)+"px",this.refreshCaptions()},refreshCaptions:function(){var t,e,i=LayoutMode.currentOffset;this.captionMarginLeft.innerHTML="<span>margin-left: </span>"+LayoutMode.getCaptionProperty("marginLeft"),this.captionMarginRight.innerHTML="<span>margin-right: </span>"+LayoutMode.getCaptionProperty("marginRight"),this.captionMarginTop.innerHTML="<span>margin-top: </span>"+LayoutMode.getCaptionProperty("marginTop"),this.captionMarginBottom.innerHTML="<span>margin-bottom: </span>"+LayoutMode.getCaptionProperty("marginBottom"),e=i.left-LayoutMode.marginLeft-80<0,this.captionMarginLeft.classList[e?"add":"remove"]("edge"),this.captionMarginLeft.style.marginRight=LayoutMode.paddingLeft+LayoutMode.marginLeft+(e?-this.captionMarginLeft.offsetWidth-17:14)+"px",t=i.left+LayoutMode.outerWidth+LayoutMode.marginRight+80>window.innerWidth,this.captionMarginRight.classList[t?"add":"remove"]("edge"),this.captionMarginRight.style.marginLeft=LayoutMode.paddingRight+LayoutMode.marginRight+(t?-this.captionMarginRight.offsetWidth-17:14)+"px",this.captionMarginBottom.style.bottom=-LayoutMode.marginBottom-LayoutMode.paddingBottom-24+"px",this.captionMarginTop.style.top=-LayoutMode.marginTop-LayoutMode.paddingTop-24+"px"},initDraggers:function(){var t=this,e="ontouchstart"in document;$(document).on(e?"touchstart":"mousedown",function(e){var i,o,n,a;t.overMarginLeft&&(o=LayoutMode.marginLeft,i=LayoutMode.marginRight,new Dragger(e.originalEvent,{vertical:!1,move:function(t){t=LayoutMode.shiftPressed?t:t/4,(LayoutMode.selectedRule||LayoutMode.currentElement).style.marginLeft=Math.round(Math.max(0,o+t))+"px",(LayoutMode.selectedRule||LayoutMode.currentElement).style.marginRight=LayoutMode.altPressed?Math.round(Math.max(0,o+t))+"px":i+"px",LayoutMode.relayout()}})),t.overMarginRight&&(o=LayoutMode.marginLeft,i=LayoutMode.marginRight,new Dragger(e.originalEvent,{vertical:!1,move:function(t){t=LayoutMode.shiftPressed?t:t/4,(LayoutMode.selectedRule||LayoutMode.currentElement).style.marginRight=Math.round(Math.max(0,i-t))+"px",(LayoutMode.selectedRule||LayoutMode.currentElement).style.marginLeft=LayoutMode.altPressed?Math.round(Math.max(0,i-t))+"px":o+"px",LayoutMode.relayout()}})),t.overMarginTop&&(a=LayoutMode.marginTop,n=LayoutMode.marginBottom,new Dragger(e.originalEvent,{vertical:!0,move:function(t){t=LayoutMode.shiftPressed?t:t/4,(LayoutMode.selectedRule||LayoutMode.currentElement).style.marginTop=Math.round(Math.max(0,a+t))+"px",(LayoutMode.selectedRule||LayoutMode.currentElement).style.marginBottom=LayoutMode.altPressed?Math.round(Math.max(0,a+t))+"px":n+"px",LayoutMode.relayout()}})),t.overMarginBottom&&(a=LayoutMode.marginTop,n=LayoutMode.marginBottom,new Dragger(e.originalEvent,{vertical:!0,move:function(t){t=LayoutMode.shiftPressed?t:t/4,(LayoutMode.selectedRule||LayoutMode.currentElement).style.marginBottom=Math.round(Math.max(0,n-t))+"px",(LayoutMode.selectedRule||LayoutMode.currentElement).style.marginTop=LayoutMode.altPressed?Math.round(Math.max(0,n-t))+"px":a+"px",LayoutMode.relayout()}}))})}}),function(){LayoutMode.enable(),$("#testbox").click()}();