if("function"!=typeof window.getMatchedCSSRules){var ELEMENT_RE=/[\w-]+/g,ID_RE=/#[\w-]+/g,CLASS_RE=/\.[\w-]+/g,ATTR_RE=/\[[^\]]+\]/g,PSEUDO_CLASSES_RE=/\:(?!not)[\w-]+(\(.*\))?/g,PSEUDO_ELEMENTS_RE=/\:\:?(after|before|first-letter|first-line|selection)/g;function toArray(t){return[].slice.call(t)}function getSheetRules(t){var e=t.media&&t.media.mediaText;return t.disabled?[]:e&&e.length&&!window.matchMedia(e).matches?[]:toArray(t.cssRules)}function _find(t,e){t.match(e);return e?e.length:0}function calculateScore(t){for(var e,i,o=[0,0,0],a=t.split(" ");"string"==typeof(e=a.shift());)i=_find(e,PSEUDO_ELEMENTS_RE),(o[2]=i)&&(e=e.replace(PSEUDO_ELEMENTS_RE,"")),i=_find(e,PSEUDO_CLASSES_RE),(o[1]=i)&&(e=e.replace(PSEUDO_CLASSES_RE,"")),i=_find(e,ATTR_RE),o[1]+=i,i&&(e=e.replace(ATTR_RE,"")),i=_find(e,ID_RE),(o[0]=i)&&(e=e.replace(ID_RE,"")),i=_find(e,CLASS_RE),o[1]+=i,i&&(e=e.replace(CLASS_RE,"")),o[2]+=_find(e,ELEMENT_RE);return parseInt(o.join(""),10)}function getSpecificityScore(t,e){for(var i,o,a=e.split(","),n=0;i=a.shift();)t.webkitMatchesSelector(i)&&(n=n<(o=calculateScore(i))?o:n);return n}function sortBySpecificity(i,t){return t.sort(function(t,e){return getSpecificityScore(i,e.selectorText)-getSpecificityScore(i,t.selectorText)})}window.getMatchedCSSRules=function(t){var e,i,o,a,n=[];for(e=toArray(window.document.styleSheets);i=e.shift();)for(o=getSheetRules(i);a=o.shift();)a.styleSheet?o=getSheetRules(a.styleSheet).concat(o):a.media?o=getSheetRules(a).concat(o):t.webkitMatchesSelector(a.selectorText)&&n.push(a);return sortBySpecificity(t,n)}}var Ghost=function(t){this.overlayElement=this.create(),this.currentElement=t};$.extend(Ghost.prototype,{create:function(){var t=$('<div class="overlay ghost"></div>');return $('<div class="container-margin top"></div>').appendTo(t),$('<div class="container-margin bottom"></div>').appendTo(t),$('<div class="container-margin left"></div>').appendTo(t),$('<div class="container-margin right"></div>').appendTo(t),$('<div class="container-padding top"></div>').appendTo(t),$('<div class="container-padding bottom"></div>').appendTo(t),$('<div class="container-padding left"></div>').appendTo(t),$('<div class="container-padding right"></div>').appendTo(t),t.appendTo("body"),t[0]},destroy:function(){this.overlayElement.parentNode.removeChild(this.overlayElement)},relayout:function(t){t&&(this.currentElement=t);var e=this.overlayElement,i=$(this.currentElement).offset(),o=getComputedStyle(this.currentElement),a=parseInt(o.width),n=parseInt(o.height),s=parseInt(o.paddingLeft),d=parseInt(o.paddingTop),r=parseInt(o.paddingRight),h=parseInt(o.paddingBottom),l=parseInt(o.marginLeft),g=parseInt(o.marginTop),p=parseInt(o.marginRight),u=parseInt(o.marginBottom),c=a+s+r,y=n+d+h;e.style.display="block",e.style.width=a+"px",e.style.height=n+"px",e.style.transform="translate("+(i.left+s)+"px, "+(i.top+d)+"px)",$(".container-padding.left",e).css({width:s,height:y,top:-d,left:-s}),$(".container-padding.right",e).css({width:r,height:y,top:-d,right:-r}),$(".container-padding.top",e).css({width:a,height:d,top:-d}),$(".container-padding.bottom",e).css({width:a,height:h,bottom:-h}),$(".container-margin.left",e).css({width:l,height:y+g+u,top:-(d+g),left:-(s+l)}),$(".container-margin.right",e).css({width:p,height:y+g+u,top:-(d+g),right:-(r+p)}),$(".container-margin.top",e).css({width:c,height:g,top:-(d+g),left:-s}),$(".container-margin.bottom",e).css({width:c,height:u,bottom:-(h+u),left:-s})}}),function(){"use strict";var i="ontouchstart"in document,t=function(t,e){this.options=e,this.eventDown=t.touches?t.touches[0]:t,this.start()};$.extend(t.prototype,{start:function(){event.preventDefault(),LayoutMode.interacting=!0,LayoutMode.overlayElement.classList.add("interacting");var e=this;this.__move=function(t){e.move(t)},this.__stop=function(t){e.stop(t)},document.addEventListener(i?"touchmove":"mousemove",this.__move,!1),document.addEventListener(i?"touchend":"mouseup",this.__stop,!1)},move:function(t){this.eventMove=t.touches?t.touches[0]:t,t.preventDefault();var e=0;e=this.options.vertical?this.eventDown.pageY-this.eventMove.pageY:this.eventDown.pageX-this.eventMove.pageX,this.options.move(e,t)},stop:function(t){document.removeEventListener(i?"touchmove":"mousemove",this.__move),document.removeEventListener(i?"touchend":"mouseup",this.__stop),t.preventDefault(),LayoutMode.lastInteractionTime=Date.now(),LayoutMode.interacting=!1,LayoutMode.overlayElement.classList.remove("interacting"),this.options.stop&&this.options.stop()}}),window.Dragger=t}();var SPECIFICITY=function(){var t,s;return t=function(t){var e,i,o,a,n=[];for(o=0,a=(e=t.split(",")).length;o<a;o+=1)0<(i=e[o]).length&&n.push(s(i));return n},s=function(t){var e,i,r=t,h={a:0,b:0,c:0},l=[];return e=function(t,e){var i,o,a,n,s,d;if(t.test(r))for(o=0,a=(i=r.match(t)).length;o<a;o+=1)h[e]+=1,n=i[o],s=r.indexOf(n),d=n.length,l.push({selector:n,type:e,index:s,length:d}),r=r.replace(n,Array(d+1).join(" "))},(i=/:not\(([^\)]*)\)/g).test(r)&&(r=r.replace(i,"     $1 ")),function(){var t,e,i,o,a=/{[^]*/gm;if(a.test(r))for(e=0,i=(t=r.match(a)).length;e<i;e+=1)o=t[e],r=r.replace(o,Array(o.length+1).join(" "))}(),e(/(\[[^\]]+\])/g,"b"),e(/(#[^\s\+>~\.\[:]+)/g,"a"),e(/(\.[^\s\+>~\.\[:]+)/g,"b"),e(/(::[^\s\+>~\.\[:]+|:first-line|:first-letter|:before|:after)/gi,"c"),e(/(:[\w-]+\([^\)]*\))/gi,"b"),e(/(:[^\s\+>~\.\[:]+)/g,"b"),r=(r=r.replace(/[\*\s\+>~]/g," ")).replace(/[#\.]/g," "),e(/([^\s\+>~\.\[:]+)/g,"c"),l.sort(function(t,e){return t.index-e.index}),{selector:t,specificity:"0,"+h.a.toString()+","+h.b.toString()+","+h.c.toString(),parts:l}},{calculate:t}}();!function(){for(var t,e,i={},o={},a=document.styleSheets,n=0;n<a.length;n++)if((t=a[n]).cssRules)for(var s=0;s<t.cssRules.length;s++)o[(e=t.cssRules[s]).selectorText]=e;i.resolve=function(t){for(var e=window.getMatchedCSSRules(t)||[],i=[],o=0;o<e.length;o++)i.push([e[o],parseInt(SPECIFICITY.calculate(e[o].selectorText)[0].specificity.replace(/\,/g,""),10)+.01*o]);return i=i.sort(function(t,e){return e[1]-t[1]}).map(function(t){return t[0]})},window.StyleParser=i}(),function(){var t=function(){this.overlayElement=null,this.currentElement=null,this.selectedRule=null,this.hoverGhost=new Ghost,this.over=!1,this.interacting=!1,this.create()};$.extend(t.prototype,{plugins:[],registerPlugin:function(t){this.plugins.push(t),t.create&&t.create.call(t)},callPlugin:function(t,e,i,o,a,n,s){for(var d,r,h=0;h<this.plugins.length;h++)this.plugins[h][t]&&void 0!==(r=this.plugins[h][t].call(this.plugins[h],e,i,o,a,n,s))&&(d=r);return d},sortPlugins:function(){this.plugins.sort(function(t,e){return t.priority>e.priority})},enable:function(){var i=this;this.sortPlugins(),$("body *:not(.overlay,.overlay *,.overlay-title,.overlay-title *)").on("mouseover",function(t){var e=i.hoverElement!==this;if(i.hoverElement=this,e&&i.callPlugin("hoverTargetChange",t),i.hoverGhost.currentElement!==this&&!i.interacting&&!i.over)return i.hoverGhost.relayout(this),!1}).on("click",function(){return i.currentElement===this||i.interacting||Date.now()-i.lastInteractionTime<5||(i.currentElement&&i.deactivate(),i.activate(this)),!1})},create:function(){this.createOverlay(),this.init()},createOverlay:function(){this.overlayElement=$('<div id="overlay" class="overlay"></div>')[0],this.containerMarginTop=$('<div class="container-margin top"></div>').appendTo(this.overlayElement)[0],this.containerMarginBottom=$('<div class="container-margin bottom"></div>').appendTo(this.overlayElement)[0],this.containerMarginLeft=$('<div class="container-margin left"></div>').appendTo(this.overlayElement)[0],this.containerMarginRight=$('<div class="container-margin right"></div>').appendTo(this.overlayElement)[0],this.containerPaddingTop=$('<div class="container-padding top"></div>').appendTo(this.overlayElement)[0],this.containerPaddingBottom=$('<div class="container-padding bottom"></div>').appendTo(this.overlayElement)[0],this.containerPaddingLeft=$('<div class="container-padding left"></div>').appendTo(this.overlayElement)[0],this.containerPaddingRight=$('<div class="container-padding right"></div>').appendTo(this.overlayElement)[0],document.body.appendChild(this.overlayElement)},init:function(){this.initHover();var e=this;this.__keyup=function(t){16===t.which&&(e.shiftPressed=!1),18===t.which&&(e.altPressed=!1),17===t.which&&(e.ctrlPressed=!1),27===t.keyCode&&e.deactivate()},this.__keydown=function(t){16===t.which&&(e.shiftPressed=!0),18===t.which&&(e.altPressed=!0),17===t.which&&(e.ctrlPressed=!0)},this.__resize=function(){window.LayoutMode.relayout()},$(document).on("keyup",this.__keyup),$(document).on("keydown",this.__keydown),$(window).on("resize",this.__resize)},initHover:function(){var e=this;$("body").on("mousemove",function(t){e.__lastMouseMoveEvent=t,e.currentElement&&!e.hidden&&e.processOverLogic(t)})},processOverLogic:function(t){var e=this.currentOffset;t.pageX>e.left-this.marginLeft-10&&t.pageY>e.top-this.marginTop-10&&t.pageX<e.left+this.outerWidth+this.marginRight+10&&t.pageY<e.top+this.outerHeight+this.marginBottom+10?this.over||(this.over=!0,this.overlayElement.classList.add("hover"),this.hoverGhost.overlayElement.style.display="none"):this.over&&!this.interacting&&(this.over=!1,this.overlayElement.classList.remove("hover"),this.hoverGhost.overlayElement.style.display="block"),this.interacting||this.callPlugin("mousemove",t)},calculateHandleSize:function(t,e){var i=16,o=16;return t<100&&(i=Math.max(8,Math.min(16,i*(t/60)))),e<100&&(o=Math.max(8,Math.min(16,o*(e/60)))),{y:o,x:i}},relayout:function(){var t=this.computedStyle=getComputedStyle(this.currentElement),e=this.overlayElement,i=$(this.currentElement),o=this.currentOffset=i.offset(),a=this.paddingLeft=parseInt(t.paddingLeft),n=this.paddingTop=parseInt(t.paddingTop),s=this.paddingRight=parseInt(t.paddingRight),d=this.paddingBottom=parseInt(t.paddingBottom),r=this.marginLeft=parseInt(t.marginLeft),h=this.marginTop=parseInt(t.marginTop),l=this.marginRight=parseInt(t.marginRight),g=this.marginBottom=parseInt(t.marginBottom),p=this.innerWidth=parseInt(t.width)||this.currentElement.offsetWidth-a-s,u=this.innerHeight=parseInt(t.height)||this.currentElement.offsetHeight-n-d,c=this.outerWidth=p+a+s,y=this.outerHeight=u+n+d;e.style.width=p+"px",e.style.height=u+"px",e.style.transform="translate("+(o.left+a)+"px, "+(o.top+n)+"px)",this.containerPaddingLeft.style.transform="translate("+-a+"px, "+-n+"px) scale("+a+", "+y+")",this.containerPaddingRight.style.transform="translate("+p+"px, "+-n+"px) scale("+s+", "+y+")",this.containerPaddingTop.style.transform="translate(0px, "+-n+"px) scale("+p+", "+n+")",this.containerPaddingBottom.style.transform="translate(0px, "+u+"px) scale("+p+", "+d+")",this.containerMarginLeft.style.transform="translate("+-(a+r)+"px, "+-(n+h)+"px) scale("+r+", "+(y+h+g)+")",this.containerMarginRight.style.transform="translate("+(p+s)+"px, "+-(n+h)+"px) scale("+l+", "+(y+h+g)+")",this.containerMarginTop.style.transform="translate("+-a+"px, "+-(n+h)+"px) scale("+c+", "+h+")",this.containerMarginBottom.style.transform="translate("+-a+"px, "+(u+d)+"px) scale("+c+", "+g+")",this.callPlugin("relayout",{computedStyle:t,offset:o,paddingLeft:a,paddingTop:n,paddingRight:s,paddingBottom:d,marginLeft:r,marginTop:h,marginRight:l,marginBottom:g,innerWidth:p,innerHeight:u,outerWidth:c,outerHeight:y},this.calculateHandleSize(p,u))},getCaptionProperty:function(t){if(this.currentElement.style[t])return this.currentElement.style[t].replace(/(em|px)/," <span>$1</span>");for(var e=0;e<this.matchedRules.length;e++)if(this.matchedRules[e].style[t])return this.matchedRules[e].style[t].replace(/(em|px)/," <span>$1</span>");var i="";return-1<t.indexOf("margin")||-1<t.indexOf("padding")?i=this[t]:"height"===t?i=this.innerHeight:"width"===t&&(i=this.innerWidth),"("+i+" <span>px</span>)"},activate:function(t){this.currentElement=t,this.computedStyle=getComputedStyle(this.currentElement),this.overlayElement.classList.add("hover"),this.overlayElement.style.display="block",this.over=!0,"inline"===this.computedStyle.display?this.overlayElement.classList.add("hover-inline"):this.overlayElement.classList.remove("hover-inline"),this.hoverGhost.overlayElement.style.display="none",this.matchedRules=StyleParser.resolve(this.currentElement),this.callPlugin("activate"),this.relayout()},deactivate:function(){this.selectedRule&&this.exitRuleMode(),this.overlayElement.classList.remove("hover","hidden"),this.overlayElement.style.display="none",this.callPlugin("deactivate"),this.over=!1,this.currentElement=null},enterRuleMode:function(t,e){this.selectedRule!==t&&(this.selectedRule?(this.selectedRule=t,this.callPlugin("changeRule",e)):(this.selectedRule=t,this.callPlugin("enterRule",e)))},exitRuleMode:function(){this.callPlugin("exitRule"),this.selectedRule=null},selectRule:function(t){this.selectedProp=t;for(var e=0;e<this.matchedRules.length;e++)if(this.matchedRules[e].style[t])return void this.enterRuleMode(this.matchedRules[e],e);this.exitRuleMode()},deselectRule:function(t){this.selectedProp===t&&this.exitRuleMode()},show:function(){this.hidden=!1,this.over=this.__lastOver,this.over&&this.overlayElement.classList.add("hover"),this.overlayElement.classList.remove("hidden"),this.__lastMouseMoveEvent&&this.processOverLogic(this.__lastMouseMoveEvent),this.hoverGhost.overlayElement.style.visibility="",this.callPlugin("show")},hide:function(){this.hidden=!0,this.__lastOver=this.over,this.over=!1,this.overlayElement.classList.remove("hover"),this.overlayElement.classList.add("hidden"),this.hoverGhost.overlayElement.style.visibility="hidden",this.callPlugin("hide")},setLastActiveProperty:function(t){this.lastActiveProperty=t},changeValue:function(t,e,i){this.ctrlPressed&&(i=!0),e=Math.round(e);var o=this.callPlugin("changeValue",t,e,i);void 0!==o&&(e=o),(this.selectedRule||this.currentElement).style[t]=Math.max(0,e)+"px"}}),window.LayoutMode=new t}(),LayoutMode.registerPlugin({create:function(){this.titleBox=$('<div class="overlay-title"><div class="title-rule"><span class="selected">inline style</span> <span class="toggle">▾</span><ul class="dropdown"><li>inline style</li></ul></div><div class="title-proportions">100 x 100</div></div>').appendTo(document.body)[0],this.titleProportions=$(".title-proportions",this.titleBox)[0],this.titleDropdown=$(".dropdown",this.titleBox)},activate:function(){var t=this.titleBox,e=this.titleDropdown;$("span",t).click(function(){$(".dropdown",t).toggle()}),e.on("click","li",function(){e.hide(),$(".selected",t).html(this.innerHTML)}),this.fillRules()},deactivate:function(){this.titleBox.style.opacity=0,$("span",this.titleBox).off("click"),$("span",this.titleDropdown).off("click")},enterRule:function(t){this.titleBox.classList.add("rule"),LayoutMode.overlayElement.style.zIndex=10002,this.changeRule(t)},changeRule:function(t){this.titleDropdown.find("li:eq("+(t+1)+")").click()},exitRule:function(){$("span.selected",this.titleBox).html("inline style"),this.titleBox.classList.remove("rule"),LayoutMode.overlayElement.style.zIndex=""},relayout:function(t){var e=LayoutMode.currentOffset;this.titleBox.style.opacity=1,this.titleBox.style.transform="translate("+(e.left+(t.outerWidth-this.titleBox.offsetWidth)/2)+"px, "+(e.top-t.marginTop-55)+"px)",this.titleProportions.innerHTML=t.outerWidth+" x "+t.outerHeight},show:function(){this.titleBox.style.opacity=1},hide:function(){this.titleBox.style.opacity=0},fillRules:function(){var t=LayoutMode.matchedRules;this.titleDropdown.empty(),$("<li>inline style</li>").appendTo(this.titleDropdown);for(var e=0;e<t.length;e++)$("<li>"+t[e].selectorText+"</li>").data("cssRule",t[e]).appendTo(this.titleDropdown)}}),LayoutMode.registerPlugin({create:function(){var t=LayoutMode.overlayElement;this.guideMarginLeft=$('<div class="guide guide-margin-left"></div>').appendTo(t)[0],this.guideMarginRight=$('<div class="guide guide-margin-right"></div>').appendTo(t)[0],this.guideMarginBottom=$('<div class="guide guide-margin-bottom"></div>').appendTo(t)[0],this.guideMarginTop=$('<div class="guide guide-margin-top"></div>').appendTo(t)[0],this.guidePaddingLeft=$('<div class="guide guide-padding-left"></div>').appendTo(t)[0],this.guidePaddingRight=$('<div class="guide guide-padding-right"></div>').appendTo(t)[0],this.guidePaddingBottom=$('<div class="guide guide-padding-bottom"></div>').appendTo(t)[0],this.guidePaddingTop=$('<div class="guide guide-padding-top"></div>').appendTo(t)[0]},relayout:function(t){this.guidePaddingLeft.style.transform="translate(0px, "+(-t.offset.top-t.paddingTop)+"px)",this.guidePaddingLeft.style.height=window.innerHeight+"px",this.guidePaddingLeft.style.left=-t.paddingLeft+"px",this.guidePaddingRight.style.transform="translate(0px, "+(-t.offset.top-t.paddingTop)+"px)",this.guidePaddingRight.style.height=window.innerHeight+"px",this.guidePaddingRight.style.right=-t.paddingRight-1+"px",this.guidePaddingBottom.style.transform="translate("+(-t.offset.left-t.paddingLeft)+"px, 0px)",this.guidePaddingBottom.style.width=window.innerWidth+"px",this.guidePaddingBottom.style.bottom=-t.paddingBottom-1+"px",this.guidePaddingTop.style.transform="translate("+(-t.offset.left-t.paddingLeft)+"px, 0px)",this.guidePaddingTop.style.width=window.innerWidth+"px",this.guidePaddingTop.style.top=-t.paddingTop-1+"px",this.guideMarginLeft.style.transform="translate(0px, "+(-t.offset.top-t.paddingTop)+"px)",this.guideMarginLeft.style.height=window.innerHeight+"px",this.guideMarginLeft.style.left=-t.paddingLeft-t.marginLeft+"px",this.guideMarginRight.style.transform="translate(0px, "+(-t.offset.top-t.paddingTop)+"px)",this.guideMarginRight.style.height=window.innerHeight+"px",this.guideMarginRight.style.right=-t.paddingRight-t.marginRight-1+"px",this.guideMarginBottom.style.transform="translate("+(-t.offset.left-t.paddingLeft)+"px, 0px)",this.guideMarginBottom.style.width=window.innerWidth+"px",this.guideMarginBottom.style.bottom=-t.paddingBottom-t.marginBottom-1+"px",this.guideMarginTop.style.transform="translate("+(-t.offset.left-t.paddingLeft)+"px, 0px)",this.guideMarginTop.style.width=window.innerWidth+"px",this.guideMarginTop.style.top=-t.paddingTop-t.marginTop-1+"px"}}),LayoutMode.registerPlugin({create:function(){},activate:function(){},deactivate:function(){},enterRule:function(){this.createGhosts()},changeRule:function(){this.destroyGhosts(),this.createGhosts()},exitRule:function(){this.destroyGhosts()},relayout:function(){this.updateGhosts()},ghosts:[],createGhosts:function(){var e=this.ghosts;$(LayoutMode.selectedRule.selectorText).not(LayoutMode.currentElement).not(".overlay, .overlay *").each(function(){var t=new Ghost(this);t.relayout(),e.push(t)})},destroyGhosts:function(){for(var t=0;t<this.ghosts.length;t++)this.ghosts[t].destroy();this.ghosts=[]},updateGhosts:function(){if(this.ghosts)for(var t=0;t<this.ghosts.length;t++)this.ghosts[t].relayout()}}),LayoutMode.registerPlugin({activate:function(){LayoutMode.currentElement.setAttribute("contentEditable",!0),LayoutMode.currentElement.style.outline="none",LayoutMode.currentElement.focus(),$(document).on("keyup",this.keyup)},deactivate:function(){LayoutMode.currentElement.removeAttribute("contentEditable"),LayoutMode.currentElement.style.outline="",$(document).off("keyup",this.keyup)},keyup:function(){LayoutMode.relayout()}}),LayoutMode.registerPlugin({create:function(){},activate:function(){var e=this;$(document).on("keydown",function(t){91===t.keyCode&&e.enable()}).on("keyup",function(t){91===t.keyCode&&e.disable()})},deactivate:function(){this.disable()},hoverTargetChange:function(t){if(this.enabled&&this.processCommandOverLogic(t),this.enabled&&LayoutMode.currentElement&&LayoutMode.hoverElement!==LayoutMode.currentElement&&!$.contains(LayoutMode.hoverElement,LayoutMode.currentElement)&&!$.contains(LayoutMode.currentElement,LayoutMode.hoverElement))return this.visualizeRelationTo(LayoutMode.hoverElement),!1},enable:function(){this.enabled=!0,LayoutMode.hide(),LayoutMode.__lastMouseMoveEvent&&this.processCommandOverLogic(LayoutMode.__lastMouseMoveEvent),LayoutMode.hoverElement===LayoutMode.currentElement||$.contains(LayoutMode.hoverElement,LayoutMode.currentElement)||$.contains(LayoutMode.currentElement,LayoutMode.hoverElement)||this.visualizeRelationTo(LayoutMode.hoverElement)},disable:function(){this.enabled=!1,this.commandOver=!1,this.vLineX&&(this.vLineX.style.opacity=0),this.vLineY&&(this.vLineY.style.opacity=0),LayoutMode.show()},processCommandOverLogic:function(t){var e=LayoutMode.currentOffset;t.pageX>e.left-LayoutMode.marginLeft-10&&t.pageY>e.top-LayoutMode.marginTop-10&&t.pageX<e.left+LayoutMode.outerWidth+LayoutMode.marginRight+10&&t.pageY<e.top+LayoutMode.outerHeight+LayoutMode.marginBottom+10?this.commandOver||(this.commandOver=!0,this.visualizeRelationToWindow()):this.commandOver&&(this.commandOver=!1)},createVisualizationLines:function(){this.vLineX||(this.vLineX=document.createElement("div"),this.vLineX.className="vline-x",document.body.appendChild(this.vLineX),this.vLineXCaption=document.createElement("div"),this.vLineXCaption.className="caption",this.vLineX.appendChild(this.vLineXCaption),this.vLineXCrossBar=document.createElement("div"),this.vLineXCrossBar.className="crossbar",this.vLineX.appendChild(this.vLineXCrossBar)),this.vLineY||(this.vLineY=document.createElement("div"),this.vLineY.className="vline-y",document.body.appendChild(this.vLineY),this.vLineYCaption=document.createElement("div"),this.vLineYCaption.className="caption",this.vLineY.appendChild(this.vLineYCaption),this.vLineYCrossBar=document.createElement("div"),this.vLineYCrossBar.className="crossbar",this.vLineY.appendChild(this.vLineYCrossBar))},visualizeRelationToWindow:function(){var t=LayoutMode.currentElement;this.createVisualizationLines(),this.vLineX.style.opacity=1,this.vLineX.style.top=LayoutMode.currentOffset.top+t.offsetHeight/2+"px",this.vLineX.style.left="0px",this.vLineX.style.width=LayoutMode.currentOffset.left+"px",this.vLineXCaption.innerHTML=LayoutMode.currentOffset.left+" <span>px</span>",this.vLineY.style.opacity=1,this.vLineY.style.left=LayoutMode.currentOffset.left+t.offsetWidth/2+"px",this.vLineY.style.top="0px",this.vLineY.style.height=LayoutMode.currentOffset.top+"px",this.vLineYCaption.innerHTML=LayoutMode.currentOffset.top+" <span>px</span>"},visualizeRelationTo:function(t){var e,i,o=LayoutMode.currentElement,a=LayoutMode.currentOffset,n=$(t).offset();this.createVisualizationLines();var s=n.left+t.offsetWidth,d=a.left+o.offsetWidth,r=n.left,h=a.left,l=n.top+t.offsetHeight,g=a.top+o.offsetHeight,p=n.top,u=a.top;s<h?(e=a.top+o.offsetHeight/2,this.vLineX.style.opacity=1,this.vLineX.style.top=e+"px",this.vLineX.style.left=s+"px",this.vLineX.style.width=h-s+"px",this.vLineXCaption.innerHTML=h-s+" <span>px</span>",l<e?(this.vLineXCrossBar.style.display="block",this.vLineXCrossBar.style.left="0px",this.vLineXCrossBar.style.bottom="0px",this.vLineXCrossBar.style.top="auto",this.vLineXCrossBar.style.height=o.offsetHeight/2+(u-l)+"px"):e<p?(this.vLineXCrossBar.style.display="block",this.vLineXCrossBar.style.left="0px",this.vLineXCrossBar.style.top="0px",this.vLineXCrossBar.style.bottom="auto",this.vLineXCrossBar.style.height=o.offsetHeight/2+(p-g)+"px"):this.vLineXCrossBar.style.display="none"):d<r?(e=a.top+o.offsetHeight/2,this.vLineX.style.opacity=1,this.vLineX.style.top=e+"px",this.vLineX.style.left=d+"px",this.vLineX.style.width=r-d+"px",this.vLineXCaption.innerHTML=r-d+" <span>px</span>",l<e?(this.vLineXCrossBar.style.display="block",this.vLineXCrossBar.style.left="100%",this.vLineXCrossBar.style.bottom="0px",this.vLineXCrossBar.style.top="auto",this.vLineXCrossBar.style.height=o.offsetHeight/2+(u-l)+"px"):e<p?(this.vLineXCrossBar.style.display="block",this.vLineXCrossBar.style.left="100%",this.vLineXCrossBar.style.top="0px",this.vLineXCrossBar.style.bottom="auto",this.vLineXCrossBar.style.height=o.offsetHeight/2+(p-g)+"px"):this.vLineXCrossBar.style.display="none"):this.vLineX.style.opacity=0,l<u?(i=a.left+o.offsetWidth/2,this.vLineY.style.opacity=1,this.vLineY.style.left=i+"px",this.vLineY.style.top=l+"px",this.vLineY.style.height=u-l+"px",this.vLineYCaption.innerHTML=u-l+" <span>px</span>",s<i?(this.vLineYCrossBar.style.display="block",this.vLineYCrossBar.style.top="0px",this.vLineYCrossBar.style.right="0px",this.vLineYCrossBar.style.left="auto",this.vLineYCrossBar.style.width=o.offsetWidth/2+(h-s)+"px"):i<r?(this.vLineYCrossBar.style.display="block",this.vLineYCrossBar.style.top="0px",this.vLineYCrossBar.style.left="0px",this.vLineYCrossBar.style.right="auto",this.vLineYCrossBar.style.width=o.offsetWidth/2+(r-d)+"px"):this.vLineYCrossBar.style.display="none"):g<p?(i=a.left+o.offsetWidth/2,this.vLineY.style.opacity=1,this.vLineY.style.left=i+"px",this.vLineY.style.top=g+"px",this.vLineY.style.height=p-g+"px",this.vLineYCaption.innerHTML=p-g+" <span>px</span>",s<i?(this.vLineYCrossBar.style.display="block",this.vLineYCrossBar.style.top="100%",this.vLineYCrossBar.style.right="0px",this.vLineYCrossBar.style.left="auto",this.vLineYCrossBar.style.width=o.offsetWidth/2+(h-s)+"px"):i<r?(this.vLineYCrossBar.style.display="block",this.vLineYCrossBar.style.top="100%",this.vLineYCrossBar.style.left="0px",this.vLineYCrossBar.style.right="auto",this.vLineYCrossBar.style.width=o.offsetWidth/2+(r-d)+"px"):this.vLineYCrossBar.style.display="none"):this.vLineY.style.opacity=0}}),LayoutMode.registerPlugin({priority:0,create:function(){this.handleHeight=$('<div class="handle bottom handle-size"></div>').appendTo(LayoutMode.overlayElement),this.handleWidth=$('<div class="handle right handle-size"></div>').appendTo(LayoutMode.overlayElement),this.captionWidth=$('<div class="caption caption-width"></div>').appendTo(LayoutMode.overlayElement)[0],this.captionHeight=$('<div class="caption caption-height"></div>').appendTo(LayoutMode.overlayElement)[0],this.initDraggers()},deactivate:function(){this.overInner=!1,LayoutMode.overSize=!1,LayoutMode.overlayElement.classList.remove("hover-inner")},show:function(){this.overInner&&LayoutMode.overlayElement.classList.add("hover-inner")},hide:function(){LayoutMode.overlayElement.classList.remove("hover-inner")},mousemove:function(t){var e=LayoutMode.currentOffset;t.pageX>e.left+LayoutMode.paddingLeft&&t.pageY>e.top+LayoutMode.paddingTop&&t.pageX<e.left+LayoutMode.outerWidth-LayoutMode.paddingRight&&t.pageY<e.top+LayoutMode.outerHeight-LayoutMode.paddingBottom&&!t.target.classList.contains("handle-padding")&&!t.target.classList.contains("handle-margin")?this.overInner||(LayoutMode.overlayElement.classList.add("hover-inner"),this.overInner=!0):this.overInner&&(this.overInner=!1,LayoutMode.overlayElement.classList.remove("hover-inner")),this.processOverWidth(t),this.processOverHeight(t)},relayout:function(t,e){this.handleWidth[0].style.height=e.y+"px",this.handleHeight[0].style.width=e.x+"px",this.handleWidth[0].style.marginTop=(t.paddingRight<20?+e.y/4*t.paddingRight/5-1.5*e.y:-e.y/2)+"px",this.captionWidth.style.marginTop=(t.paddingRight<20?+e.y/4*t.paddingRight/5-1.5*e.y:-8)+"px",this.handleHeight[0].style.marginLeft=(t.paddingBottom<20?+e.x/4*t.paddingBottom/5-1.5*e.x:-e.x/2)+"px",this.captionHeight.style.marginLeft=(t.paddingBottom<20?e.x*(t.paddingBottom/20)-2*e.x+e.x-9:-10)+"px",this.refreshCaptions()},processOverWidth:function(t){var e=LayoutMode.currentOffset;t.pageX>e.left+LayoutMode.paddingLeft+LayoutMode.innerWidth-5&&t.pageY>e.top+LayoutMode.paddingTop&&t.pageX<e.left+LayoutMode.outerWidth-LayoutMode.paddingRight&&t.pageY<e.top+LayoutMode.outerHeight-LayoutMode.paddingBottom&&!t.target.classList.contains("handle-padding")&&!t.target.classList.contains("handle-margin")?this.overWidth||(document.body.classList.add("resize-width"),this.captionWidth.classList.add("over"),this.refreshCaptions(),LayoutMode.selectRule("width"),this.overWidth=!0,LayoutMode.overSize=!0):this.overWidth&&(this.overWidth=!1,LayoutMode.overSize=!1,document.body.classList.remove("resize-width"),this.captionWidth.classList.remove("over"),this.refreshCaptions(),LayoutMode.deselectRule("width"))},processOverHeight:function(t){var e=LayoutMode.currentOffset;t.pageY>e.top+LayoutMode.paddingTop+LayoutMode.innerHeight-5&&t.pageX>e.left+LayoutMode.paddingLeft&&t.pageY<e.top+LayoutMode.outerHeight-LayoutMode.paddingBottom&&t.pageX<e.left+LayoutMode.outerWidth-LayoutMode.paddingRight&&!t.target.classList.contains("handle-padding")&&!t.target.classList.contains("handle-margin")?this.overHeight||(document.body.classList.add("resize-height"),this.captionHeight.classList.add("over"),this.refreshCaptions(),LayoutMode.selectRule("height"),this.overHeight=!0,LayoutMode.overSize=!0):this.overHeight&&(this.overHeight=!1,LayoutMode.overSize=!1,document.body.classList.remove("resize-height"),this.captionHeight.classList.remove("over"),this.refreshCaptions(),LayoutMode.deselectRule("height"))},refreshCaptions:function(){var t;t=LayoutMode.currentOffset.left+this.outerWidth+80>window.innerWidth,this.captionWidth.classList[t?"add":"remove"]("edge"),this.captionWidth.innerHTML="<span>width: </span>"+LayoutMode.getCaptionProperty("width"),this.captionWidth.style.right=(t?16:-(this.captionWidth.offsetWidth+13))+"px",this.captionHeight.innerHTML="<span>height: </span>"+LayoutMode.getCaptionProperty("height")},initDraggers:function(){var o=this,t="ontouchstart"in document;$(document).on(t?"touchstart":"mousedown",function(t){if(o.overWidth){var e=LayoutMode.innerWidth;LayoutMode.setLastActiveProperty("width"),new Dragger(t.originalEvent,{vertical:!1,move:function(t){t=LayoutMode.shiftPressed?t:t/4,LayoutMode.changeValue("width",e-t),LayoutMode.relayout()}})}else if(o.overHeight){var i=LayoutMode.innerHeight;LayoutMode.setLastActiveProperty("height"),new Dragger(t.originalEvent,{vertical:!0,move:function(t){t=LayoutMode.shiftPressed?t:t/4,LayoutMode.changeValue("height",i-t),LayoutMode.relayout()}})}})}}),LayoutMode.registerPlugin({priority:1,create:function(){this.handlePaddingBottom=$('<div class="handle bottom handle-padding"></div>').appendTo(LayoutMode.overlayElement),this.handlePaddingRight=$('<div class="handle right handle-padding"></div>').appendTo(LayoutMode.overlayElement),this.handlePaddingTop=$('<div class="handle top handle-padding"></div>').appendTo(LayoutMode.overlayElement),this.handlePaddingLeft=$('<div class="handle left handle-padding"></div>').appendTo(LayoutMode.overlayElement);var t=this;this.handlePaddingTop.hover(function(){t.overTopHandle=!0},function(){t.overTopHandle=!1}),this.handlePaddingBottom.hover(function(){t.overBottomHandle=!0},function(){t.overBottomHandle=!1}),this.handlePaddingLeft.hover(function(){t.overLeftHandle=!0},function(){t.overLeftHandle=!1}),this.handlePaddingRight.hover(function(){t.overRightHandle=!0},function(){t.overRightHandle=!1}),this.captionPaddingLeft=$('<div class="caption caption-padding left"></div>').appendTo(LayoutMode.overlayElement)[0],this.captionPaddingRight=$('<div class="caption caption-padding right"></div>').appendTo(LayoutMode.overlayElement)[0],this.captionPaddingTop=$('<div class="caption caption-padding top"></div>').appendTo(LayoutMode.overlayElement)[0],this.captionPaddingBottom=$('<div class="caption caption-padding bottom"></div>').appendTo(LayoutMode.overlayElement)[0],this.initDraggers()},deactivate:function(){this.overPadding=!1,LayoutMode.overPadding=!1,LayoutMode.overlayElement.classList.remove("hover-padding")},show:function(){this.overPadding&&LayoutMode.overlayElement.classList.add("hover-padding")},hide:function(){LayoutMode.overlayElement.classList.remove("hover-padding")},mousemove:function(t){var e=LayoutMode.currentOffset,i=t.pageY>e.top-5&&t.pageY<e.top+5,o=t.pageY>e.top+LayoutMode.outerHeight-5&&t.pageY<e.top+LayoutMode.outerHeight+5,a=t.pageX>e.left-5&&t.pageX<e.left+5,n=t.pageX>e.left+LayoutMode.outerWidth-5&&t.pageX<e.left+LayoutMode.outerWidth+5,s=t.pageX>e.left+LayoutMode.paddingLeft&&t.pageX<e.left+LayoutMode.paddingLeft+LayoutMode.innerWidth&&t.pageY>e.top&&t.pageY<e.top+LayoutMode.paddingTop||this.overTopHandle||i,d=t.pageX>e.left+LayoutMode.paddingLeft&&t.pageX<e.left+LayoutMode.paddingLeft+LayoutMode.innerWidth&&t.pageY>e.top+LayoutMode.outerHeight-LayoutMode.paddingBottom&&t.pageY<e.top+LayoutMode.outerHeight||this.overBottomHandle||o,r=t.pageY>e.top+LayoutMode.paddingTop&&t.pageY<e.top+LayoutMode.paddingTop+LayoutMode.innerHeight&&t.pageX>e.left&&t.pageX<e.left+LayoutMode.paddingLeft||this.overLeftHandle||a,h=t.pageY>e.top+LayoutMode.paddingTop&&t.pageY<e.top+LayoutMode.paddingTop+LayoutMode.innerHeight&&t.pageX>e.left+LayoutMode.outerWidth-LayoutMode.paddingRight&&t.pageX<e.left+LayoutMode.outerWidth||this.overRightHandle||n,l=!LayoutMode.overSize&&!t.target.classList.contains("handle-margin");(s||d||r||h)&&l?this.overPadding||(LayoutMode.overlayElement.classList.add("hover-padding"),this.overPadding=!0,LayoutMode.overPadding=!0):this.overPadding&&(this.overPadding=!1,LayoutMode.overPadding=!1,LayoutMode.overlayElement.classList.remove("hover-padding"));var g=!1,p=!1;s&&l?this.overPaddingTop||(this.overPaddingTop=!0,this.captionPaddingTop.classList.add("over"),document.body.classList.add("resize-padding-top"),LayoutMode.selectRule("paddingTop"),g=!0):this.overPaddingTop&&(this.overPaddingTop=!1,this.captionPaddingTop.classList.remove("over"),LayoutMode.deselectRule("paddingTop"),p=!0),d&&l?this.overPaddingBottom||(this.overPaddingBottom=!0,this.captionPaddingBottom.classList.add("over"),document.body.classList.add("resize-padding-bottom"),LayoutMode.selectRule("paddingBottom"),g=!0):this.overPaddingBottom&&(this.overPaddingBottom=!1,this.captionPaddingBottom.classList.remove("over"),LayoutMode.deselectRule("paddingBottom"),p=!0),r&&l?this.overPaddingLeft||(this.overPaddingLeft=!0,this.captionPaddingLeft.classList.add("over"),document.body.classList.add("resize-padding-left"),LayoutMode.selectRule("paddingLeft"),g=!0):this.overPaddingLeft&&(this.overPaddingLeft=!1,this.captionPaddingLeft.classList.remove("over"),LayoutMode.deselectRule("paddingLeft"),p=!0),h&&l?this.overPaddingRight||(this.overPaddingRight=!0,this.captionPaddingRight.classList.add("over"),document.body.classList.add("resize-padding-right"),LayoutMode.selectRule("paddingRight"),g=!0):this.overPaddingRight&&(this.overPaddingRight=!1,this.captionPaddingRight.classList.remove("over"),LayoutMode.deselectRule("paddingRight"),p=!0),!g&&p&&document.body.classList.remove("resize-padding-top","resize-padding-bottom","resize-padding-left","resize-padding-right")},relayout:function(t,e){this.handlePaddingLeft[0].style.height=e.y+"px",this.handlePaddingRight[0].style.height=e.y+"px",this.handlePaddingTop[0].style.width=e.x+"px",this.handlePaddingBottom[0].style.width=e.x+"px",this.handlePaddingLeft[0].style.transform="translate("+-t.paddingLeft+"px, 0px)",this.handlePaddingRight[0].style.marginRight=-t.paddingRight+"px",this.handlePaddingTop[0].style.transform="translate(0px, "+-t.paddingTop+"px)",this.handlePaddingBottom[0].style.marginBottom=-t.paddingBottom+"px",this.handlePaddingLeft[0].style.marginTop=-e.y/2+"px",this.handlePaddingRight[0].style.marginTop=-e.y/2+"px",this.handlePaddingTop[0].style.marginLeft=-e.x/2+"px",this.handlePaddingBottom[0].style.marginLeft=-e.x/2+"px",this.refreshCaptions()},refreshCaptions:function(){var t,e,i=LayoutMode.currentOffset;this.captionPaddingLeft.innerHTML="<span>padding-left: </span>"+LayoutMode.getCaptionProperty("paddingLeft"),this.captionPaddingRight.innerHTML="<span>padding-right: </span>"+LayoutMode.getCaptionProperty("paddingRight"),this.captionPaddingTop.innerHTML="<span>padding-top: </span>"+LayoutMode.getCaptionProperty("paddingTop"),this.captionPaddingBottom.innerHTML="<span>padding-bottom: </span>"+LayoutMode.getCaptionProperty("paddingBottom"),e=i.left-80<0,this.captionPaddingLeft.classList[e?"add":"remove"]("edge"),this.captionPaddingLeft.style.marginRight=(e?LayoutMode.paddingLeft-this.captionPaddingLeft.offsetWidth-16:LayoutMode.paddingLeft+14)+"px",t=i.left+LayoutMode.outerWidth+80>window.innerWidth,this.captionPaddingRight.classList[t?"add":"remove"]("edge"),this.captionPaddingRight.style.marginLeft=(t?LayoutMode.paddingRight-this.captionPaddingRight.offsetWidth-16:LayoutMode.paddingRight+14)+"px",this.captionPaddingBottom.style.bottom=-(LayoutMode.paddingBottom+24)+"px",this.captionPaddingTop.style.top=-(LayoutMode.paddingTop+24)+"px"},initDraggers:function(){var n=this,t="ontouchstart"in document;$(document).on(t?"touchstart":"mousedown",function(t){var e,i,o,a;n.overPaddingBottom&&(e=LayoutMode.paddingBottom,i=LayoutMode.paddingTop,LayoutMode.setLastActiveProperty("paddingBottom"),new Dragger(t.originalEvent,{vertical:!0,move:function(t){t=LayoutMode.shiftPressed?t:t/4,LayoutMode.changeValue("paddingBottom",e-t),LayoutMode.changeValue("paddingTop",LayoutMode.altPressed?e-t:i,!0),LayoutMode.relayout()}})),n.overPaddingTop&&(i=LayoutMode.paddingTop,e=LayoutMode.paddingBottom,LayoutMode.setLastActiveProperty("paddingTop"),new Dragger(t.originalEvent,{vertical:!0,move:function(t){t=LayoutMode.shiftPressed?t:t/4,LayoutMode.changeValue("paddingTop",i+t),LayoutMode.changeValue("paddingBottom",LayoutMode.altPressed?i+t:e,!0),LayoutMode.relayout()}})),n.overPaddingRight&&(o=LayoutMode.paddingRight,a=LayoutMode.paddingLeft,LayoutMode.setLastActiveProperty("paddingRight"),new Dragger(t.originalEvent,{vertical:!1,move:function(t){t=LayoutMode.shiftPressed?t:t/4,LayoutMode.changeValue("paddingRight",o-t),LayoutMode.changeValue("paddingLeft",LayoutMode.altPressed?o-t:a,!0),LayoutMode.relayout()}})),n.overPaddingLeft&&(a=LayoutMode.paddingLeft,o=LayoutMode.paddingRight,LayoutMode.setLastActiveProperty("paddingLeft"),new Dragger(t.originalEvent,{vertical:!1,move:function(t){t=LayoutMode.shiftPressed?t:t/4,LayoutMode.changeValue("paddingLeft",a+t),LayoutMode.changeValue("paddingRight",LayoutMode.altPressed?a+t:o,!0),LayoutMode.relayout()}}))})}}),LayoutMode.registerPlugin({priority:2,create:function(){this.handleMarginBottom=$('<div class="handle bottom handle-margin"></div>').appendTo(LayoutMode.overlayElement),this.handleMarginRight=$('<div class="handle right handle-margin"></div>').appendTo(LayoutMode.overlayElement),this.handleMarginTop=$('<div class="handle top handle-margin"></div>').appendTo(LayoutMode.overlayElement),this.handleMarginLeft=$('<div class="handle left handle-margin"></div>').appendTo(LayoutMode.overlayElement);var t=this;this.handleMarginTop.hover(function(){t.overTopHandle=!0},function(){t.overTopHandle=!1}),this.handleMarginBottom.hover(function(){t.overBottomHandle=!0},function(){t.overBottomHandle=!1}),this.handleMarginLeft.hover(function(){t.overLeftHandle=!0},function(){t.overLeftHandle=!1}),this.handleMarginRight.hover(function(){t.overRightHandle=!0},function(){t.overRightHandle=!1}),this.captionMarginLeft=$('<div class="caption caption-margin left"></div>').appendTo(LayoutMode.overlayElement)[0],this.captionMarginRight=$('<div class="caption caption-margin right"></div>').appendTo(LayoutMode.overlayElement)[0],this.captionMarginTop=$('<div class="caption caption-margin top"></div>').appendTo(LayoutMode.overlayElement)[0],this.captionMarginBottom=$('<div class="caption caption-margin bottom"></div>').appendTo(LayoutMode.overlayElement)[0],this.initDraggers()},deactivate:function(){this.overMargin=!1,LayoutMode.overlayElement.classList.remove("hover-margin")},show:function(){this.overMargin&&LayoutMode.overlayElement.classList.add("hover-margin")},hide:function(){LayoutMode.overlayElement.classList.remove("hover-margin")},mousemove:function(t){var e=LayoutMode.currentOffset,i=t.pageY>e.top-LayoutMode.marginTop-5&&t.pageY<e.top-LayoutMode.marginTop+5,o=t.pageY>e.top+LayoutMode.outerHeight+LayoutMode.marginBottom-5&&t.pageY<e.top+LayoutMode.outerHeight+LayoutMode.marginBottom+5,a=t.pageX>e.left-LayoutMode.marginLeft-5&&t.pageX<e.left-LayoutMode.marginLeft+5,n=t.pageX>e.left+LayoutMode.outerWidth+LayoutMode.marginRight-5&&t.pageX<e.left+LayoutMode.outerWidth+LayoutMode.marginRight+5,s=t.pageX>e.left&&t.pageX<e.left+LayoutMode.outerWidth&&t.pageY>e.top-LayoutMode.marginTop&&t.pageY<e.top||this.overTopHandle||i,d=t.pageX>e.left&&t.pageX<e.left+LayoutMode.outerWidth&&t.pageY>e.top+LayoutMode.outerHeight&&t.pageY<e.top+LayoutMode.outerHeight+LayoutMode.marginBottom||this.overBottomHandle||o,r=t.pageY>e.top&&t.pageY<e.top+LayoutMode.outerHeight&&t.pageX>e.left-LayoutMode.marginLeft&&t.pageX<e.left||this.overLeftHandle||a,h=t.pageY>e.top&&t.pageY<e.top+LayoutMode.outerHeight&&t.pageX>e.left+LayoutMode.outerWidth&&t.pageX<e.left+LayoutMode.outerWidth+LayoutMode.marginRight||this.overRightHandle||n,l=!LayoutMode.overSize&&!LayoutMode.overPadding&&!t.target.classList.contains("handle-padding");(s||d||r||h)&&l?this.overMargin||(LayoutMode.overlayElement.classList.add("hover-margin"),this.overMargin=!0):this.overMargin&&(this.overMargin=!1,LayoutMode.overlayElement.classList.remove("hover-margin"));var g=!1,p=!1;s&&l?this.overMarginTop||(this.overMarginTop=!0,this.captionMarginTop.classList.add("over"),document.body.classList.add("resize-margin-top"),LayoutMode.selectRule("marginTop"),g=!0):this.overMarginTop&&(this.overMarginTop=!1,this.captionMarginTop.classList.remove("over"),LayoutMode.deselectRule("marginTop"),p=!0),d&&l?this.overMarginBottom||(this.overMarginBottom=!0,this.captionMarginBottom.classList.add("over"),document.body.classList.add("resize-margin-bottom"),LayoutMode.selectRule("marginBottom"),g=!0):this.overMarginBottom&&(this.overMarginBottom=!1,this.captionMarginBottom.classList.remove("over"),LayoutMode.deselectRule("marginBottom"),p=!0),r&&l?this.overMarginLeft||(this.overMarginLeft=!0,this.captionMarginLeft.classList.add("over"),document.body.classList.add("resize-margin-left"),LayoutMode.selectRule("marginLeft"),g=!0):this.overMarginLeft&&(this.overMarginLeft=!1,this.captionMarginLeft.classList.remove("over"),LayoutMode.deselectRule("marginLeft"),p=!0),h&&l?this.overMarginRight||(this.overMarginRight=!0,this.captionMarginRight.classList.add("over"),document.body.classList.add("resize-margin-right"),LayoutMode.selectRule("marginRight"),g=!0):this.overMarginRight&&(this.overMarginRight=!1,this.captionMarginRight.classList.remove("over"),LayoutMode.deselectRule("marginRight"),p=!0),!g&&p&&document.body.classList.remove("resize-margin-top","resize-margin-bottom","resize-margin-left","resize-margin-right")},relayout:function(t,e){this.handleMarginLeft[0].style.height=e.y+"px",this.handleMarginRight[0].style.height=e.y+"px",this.handleMarginTop[0].style.width=e.x+"px",this.handleMarginBottom[0].style.width=e.x+"px",this.handleMarginLeft[0].style.marginLeft=-(t.paddingLeft+t.marginLeft)+"px",this.handleMarginRight[0].style.marginRight=-(t.paddingRight+t.marginRight)+"px",this.handleMarginTop[0].style.marginTop=-(t.paddingTop+t.marginTop)+"px",this.handleMarginBottom[0].style.marginBottom=-(t.paddingBottom+t.marginBottom)+"px",this.handleMarginLeft[0].style.marginTop=(t.marginLeft<20?-e.y/4*t.marginLeft/5+e.y/2:-e.y/2)+"px",this.captionMarginLeft.style.marginTop=(t.marginLeft<20?-e.y/4*t.marginLeft/5-8+e.y:-8)+"px",this.handleMarginRight[0].style.marginTop=(t.marginRight<20?-e.y/4*t.marginRight/5+e.y/2:-e.y/2)+"px",this.captionMarginRight.style.marginTop=(t.marginRight<20?-e.y/4*t.marginRight/5-8+e.y:-8)+"px",this.handleMarginTop[0].style.marginLeft=(t.marginTop<20?-e.x/4*t.marginTop/5+e.x/2:-e.x/2)+"px",this.captionMarginTop.style.marginLeft=(t.marginTop<20?e.x+-e.x*(t.marginTop/20)-8:-11)+"px",this.handleMarginBottom[0].style.marginLeft=(t.marginBottom<20?-e.x/4*t.marginBottom/5+e.x/2:-e.x/2)+"px",this.captionMarginBottom.style.marginLeft=(t.marginBottom<20?e.x+-e.x*(t.marginBottom/20)-8:-11)+"px",this.refreshCaptions()},refreshCaptions:function(){var t,e,i=LayoutMode.currentOffset;this.captionMarginLeft.innerHTML="<span>margin-left: </span>"+LayoutMode.getCaptionProperty("marginLeft"),this.captionMarginRight.innerHTML="<span>margin-right: </span>"+LayoutMode.getCaptionProperty("marginRight"),this.captionMarginTop.innerHTML="<span>margin-top: </span>"+LayoutMode.getCaptionProperty("marginTop"),this.captionMarginBottom.innerHTML="<span>margin-bottom: </span>"+LayoutMode.getCaptionProperty("marginBottom"),e=i.left-LayoutMode.marginLeft-80<0,this.captionMarginLeft.classList[e?"add":"remove"]("edge"),this.captionMarginLeft.style.marginRight=LayoutMode.paddingLeft+LayoutMode.marginLeft+(e?-this.captionMarginLeft.offsetWidth-17:14)+"px",t=i.left+LayoutMode.outerWidth+LayoutMode.marginRight+80>window.innerWidth,this.captionMarginRight.classList[t?"add":"remove"]("edge"),this.captionMarginRight.style.marginLeft=LayoutMode.paddingRight+LayoutMode.marginRight+(t?-this.captionMarginRight.offsetWidth-17:14)+"px",this.captionMarginBottom.style.bottom=-LayoutMode.marginBottom-LayoutMode.paddingBottom-24+"px",this.captionMarginTop.style.top=-LayoutMode.marginTop-LayoutMode.paddingTop-24+"px"},initDraggers:function(){var n=this,t="ontouchstart"in document;$(document).on(t?"touchstart":"mousedown",function(t){var e,i,o,a;n.overMarginLeft&&(i=LayoutMode.marginLeft,e=LayoutMode.marginRight,LayoutMode.setLastActiveProperty("marginLeft"),new Dragger(t.originalEvent,{vertical:!1,move:function(t){t=LayoutMode.shiftPressed?t:t/4,LayoutMode.changeValue("marginLeft",i+t),LayoutMode.changeValue("marginRight",LayoutMode.altPressed?i+t:e,!0),LayoutMode.relayout()}})),n.overMarginRight&&(i=LayoutMode.marginLeft,e=LayoutMode.marginRight,LayoutMode.setLastActiveProperty("marginRight"),new Dragger(t.originalEvent,{vertical:!1,move:function(t){t=LayoutMode.shiftPressed?t:t/4,LayoutMode.changeValue("marginRight",e-t),LayoutMode.changeValue("marginLeft",LayoutMode.altPressed?e-t:i,!0),LayoutMode.relayout()}})),n.overMarginTop&&(a=LayoutMode.marginTop,o=LayoutMode.marginBottom,LayoutMode.setLastActiveProperty("marginTop"),new Dragger(t.originalEvent,{vertical:!0,move:function(t){t=LayoutMode.shiftPressed?t:t/4,LayoutMode.changeValue("marginTop",a+t),LayoutMode.changeValue("marginBottom",LayoutMode.altPressed?a+t:o,!0),LayoutMode.relayout()}})),n.overMarginBottom&&(a=LayoutMode.marginTop,o=LayoutMode.marginBottom,LayoutMode.setLastActiveProperty("marginBottom"),new Dragger(t.originalEvent,{vertical:!0,move:function(t){t=LayoutMode.shiftPressed?t:t/4,LayoutMode.changeValue("marginBottom",o-t),LayoutMode.changeValue("marginTop",LayoutMode.altPressed?o-t:a,!0),LayoutMode.relayout()}}))})}}),LayoutMode.registerPlugin({create:function(){$(document).on("keydown",function(t){if(LayoutMode.lastActiveProperty){if(38==t.keyCode||40==t.keyCode){switch(LayoutMode.selectRule(LayoutMode.lastActiveProperty),LayoutMode.lastActiveProperty){case"height":LayoutMode.changeValue("height",LayoutMode.innerHeight+(38==t.keyCode?-1:1),!0);break;case"paddingBottom":LayoutMode.changeValue("paddingBottom",LayoutMode.paddingBottom+(38==t.keyCode?-1:1),!0);break;case"marginBottom":LayoutMode.changeValue("marginBottom",LayoutMode.marginBottom+(38==t.keyCode?-1:1),!0);break;case"paddingTop":LayoutMode.changeValue("paddingTop",LayoutMode.paddingTop+(38==t.keyCode?1:-1),!0);break;case"marginTop":LayoutMode.changeValue("marginTop",LayoutMode.marginTop+(38==t.keyCode?1:-1),!0)}LayoutMode.relayout(),LayoutMode.deselectRule(LayoutMode.lastActiveProperty)}if(39==t.keyCode||37==t.keyCode){switch(LayoutMode.selectRule(LayoutMode.lastActiveProperty),LayoutMode.lastActiveProperty){case"width":LayoutMode.changeValue("width",LayoutMode.innerWidth+(37==t.keyCode?-1:1),!0);break;case"paddingRight":LayoutMode.changeValue("paddingRight",LayoutMode.paddingRight+(37==t.keyCode?-1:1),!0);break;case"marginRight":LayoutMode.changeValue("marginRight",LayoutMode.marginRight+(37==t.keyCode?-1:1),!0);break;case"paddingLeft":LayoutMode.changeValue("paddingLeft",LayoutMode.paddingLeft+(37==t.keyCode?1:-1),!0);break;case"marginLeft":LayoutMode.changeValue("marginLeft",LayoutMode.marginLeft+(37==t.keyCode?1:-1),!0)}LayoutMode.relayout(),LayoutMode.deselectRule(LayoutMode.lastActiveProperty)}}})}}),LayoutMode.registerPlugin({create:function(){},activate:function(){this.calculateSnapAreas()},changeValue:function(t,e,i){if(!i){var o=/(width|paddingLeft|paddingRight|marginLeft|marginRight)/.test(t)?"x":"y";return parseInt(this.calculateSnap(t,e,o))}},__previousTargets:[],flash:function(s,d){if(!(-1<this.__previousTargets.indexOf(s))){this.__previousTargets.push(s);var r=this;setTimeout(function(){if(s[1]=s[0].getBoundingClientRect(),"width"===d){var e=document.createElement("div");e.className="vline-x",document.body.appendChild(e);var t=document.createElement("div");t.className="caption",e.appendChild(t);var i=document.createElement("div");i.className="crossbar",e.appendChild(i),e.style.top=s[1].top+s[1].height/2+"px",e.style.left=s[1].left+"px",e.style.width=s[1][d]+"px",t.innerHTML=s[1][d]+" <span>px</span>",setTimeout(function(){e.classList.add("hide")},600),setTimeout(function(){document.body.removeChild(e);var t=r.__previousTargets.indexOf(s);-1<t&&r.__previousTargets.splice(t,1)},800)}if("height"===d){var o=document.createElement("div");o.className="vline-y",document.body.appendChild(o);var a=document.createElement("div");a.className="caption",o.appendChild(a);var n=document.createElement("div");n.className="crossbar",o.appendChild(n),o.style.left=s[1].left+s[1].width/2+"px",o.style.top=s[1].top+"px",o.style.height=s[1][d]+"px",a.innerHTML=s[1][d]+" <span>px</span>",setTimeout(function(){o.classList.add("hide")},600),setTimeout(function(){document.body.removeChild(o);var t=r.__previousTargets.indexOf(s);-1<t&&r.__previousTargets.splice(t,1)},800)}},0)}},isVisible:function(t,e){var i=e.top+document.body.scrollTop,o=e.top+document.body.scrollTop;return!(i>window.innerHeight||o>window.innerWidth||i+e.height<0||o+e.width<0)},calculateSnapAreas:function(){var r=this,t=document.body,h=[],l=function(t){if(t.children)for(var e,i,o,a,n,s,d=0;d<t.children.length;d++)i=(e=t.children[d]).getBoundingClientRect(),o=e,void 0,n=(a=i).width,s=a.height,n<100&&s<100||"overlay"===o.id||"overlay-title"===o.className||o===LayoutMode.currentElement||!r.isVisible(o,a)||(h.push([e,i]),l(e))};l(t),this.currentSnapTargets=h},calculateSnap:function(t,e,i){var o,a,n=this.currentSnapTargets;if("y"===i)for(a=0;a<n.length;a++)o=n[a],"height"===t&&Math.abs(o[1].height-e)<=5&&(e=o[1].height,this.flash(o,"height")),"paddingTop"===t&&Math.abs(o[1].height-(LayoutMode.paddingTop+LayoutMode.innerHeight+e))<=5&&(e=o[1].height-(LayoutMode.paddingTop+LayoutMode.innerHeight),this.flash(o,"height")),"paddingBottom"===t&&Math.abs(o[1].height-(LayoutMode.paddingBottom+LayoutMode.innerHeight+e))<=5&&(e=o[1].height-(LayoutMode.paddingBottom+LayoutMode.innerHeight),this.flash(o,"height"));else for(a=0;a<n.length;a++)o=n[a],"width"===t&&Math.abs(o[1].width-e)<=5&&(e=o[1].width,this.flash(o,"width")),"paddingLeft"===t&&Math.abs(o[1].width-(LayoutMode.paddingRight+LayoutMode.innerWidth+e))<=5&&(e=o[1].width-(LayoutMode.paddingRight+LayoutMode.innerWidth),this.flash(o,"width")),"paddingRight"===t&&Math.abs(o[1].width-(LayoutMode.paddingLeft+LayoutMode.innerWidth+e))<=5&&(e=o[1].width-(LayoutMode.paddingLeft+LayoutMode.innerWidth),this.flash(o,"width"));return e}}),LayoutMode.enable(),$("#testbox").click();